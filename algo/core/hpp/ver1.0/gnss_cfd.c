/************************************************************
* Copyrights(C) 2019 ASG Corporation.
* All rights Reserved
* File: gnss_cfd.c
* Description:
* Version: 1.0.0
* Author: none
* Date: 05/31
************************************************************/
#include "rtklib.h"
#include "gnss_cfd.h"
#include "gnss.h"
#include "gnss_sys_api.h"
#include "gnss_rtk.h"
#include <stdio.h>
#include <string.h>
#include "gnss_pe.h"
#include "gnss_mode.h"
#include "gnss.h"
#include "gnss_math.h"
#include "ag_base.h"
#include "gnss_api_def.h"

#undef MODULE_TAG
#define MODULE_TAG OBJ_AL

/* extern global data */
extern PE_MODES  peMode;
extern Kf_t*      gpz_kf_data;
extern USER_PVT*  gpz_user_pvt;
extern meas_blk_t*  gpz_Meas;
extern rtk_t rtkctrl;
extern uncertainty_t g_pvtunc;
extern Gnss_Cfg_t  g_pe_cfg;

uncertainty_t g_unc = { 0 };

#define FLTINPUTDIM	19				/* rtk factor num for cfd*/
#define FLTHIDLAYER 2
#define FLTHIDNODE 18
#define OUTDIM 1

#define FIXINPUTDIM	26				/* rtk factor num for cfd*/
#define FIXHIDLAYER 2
#define FIXHIDNODE 18

#define SPPINPUTDIM	20				/* rtk factor num for cfd*/
#define SPPHIDLAYER 2
#define SPPHIDNODE 18

#define PREINPUTDIM 12
#define PREHIDLAYER 2
#define PREHIDNODE 18

#define HISFATTHRES 20

#define FIXUNCHIGHB	1.2
#define FIXUNCLOWB	0.3
#define FLTUNCHIGHB	7.0
#define FLTUNCLOWB	3.0
#define SPPUNCHIGHB 10.0
#define SPPUNCLOWB	5.0


float g_coes_spp[SPPINPUTDIM * SPPHIDNODE + (SPPHIDLAYER - 1) * SPPHIDNODE * SPPHIDNODE + SPPHIDNODE * OUTDIM] =
{
	-0.0949270874f,   0.5612335801f,   0.1145164371f,   0.6246085763f,   0.3714914620f,  -0.0982267633f,
	0.0980549529f,   0.2578335404f,  -0.2779947221f,  -0.5010844469f,  -0.1623747200f,  -0.3550942242f,
	0.5779571533f,   0.3240730762f,   0.5547624826f,  -0.2276372313f,  -0.3935457170f,   0.1518401802f,
	-0.0585039854f,  -0.3649699986f,   0.3494772315f,   0.3826960027f,  -0.8637663722f,  -0.7549433708f,
	-1.3891609907f,   0.3098574579f,  -0.0560676083f,  -0.0343065150f,   0.2822099030f,  -0.1165125743f,
	0.3668594956f,   0.2769363225f,  -0.6992068887f,   0.5717807412f,  -0.4636960328f,   0.1127890199f,
	0.2605537176f,  -0.1141010448f,  -0.5636038780f,   0.0680357739f,   0.2127003521f,   0.1035301238f,
	-0.2406783700f,  -0.1273192316f,  -0.0965413526f,   0.1315902472f,   0.0322428718f,   0.1377477795f,
	0.5517598391f,   0.0203420203f,   0.3444072604f,  -0.1564241648f,  -0.8616514206f,   0.0346667841f,
	-0.1458661258f,   0.1547663808f,   0.1106580421f,  -0.6234988570f,  -0.2512972653f,   0.1102883816f,
	0.1733353585f,  -0.5521556735f,   0.3522282839f,   0.1093924120f,   0.1362430751f,   0.2927516699f,
	0.1015149057f,  -0.1256523132f,  -0.0622374043f,  -0.0020747627f,   0.2635383606f,   0.1818647236f,
	-0.1406854242f,  -0.2371901274f,   0.2560852170f,  -0.1948885024f,   0.0669883862f,   0.6517757177f,
	0.1356866509f,  -0.0346897170f,   0.4181530476f,  -0.3287544847f,   0.1677255630f,  -0.1119260117f,
	0.0127457129f,  -0.0094983689f,  -0.1596487314f,   0.7455548048f,  -0.2352250367f,  -0.2899951637f,
	-0.6269821525f,   0.0504210442f,   0.2839688361f,  -0.2850876749f,  -0.3595745265f,   0.1677743942f,
	-0.3393609226f,   0.2222744823f,  -0.5140860081f,   0.2876496017f,   0.1083012819f,   0.4394151270f,
	-0.0429376587f,   0.2068444192f,   0.5579323769f,   0.2755103707f,   0.1278005540f,  -0.3914031088f,
	0.3010938466f,  -0.0917646810f,  -0.3140081763f,  -0.1716970205f,   0.2025859952f,  -0.0704557076f,
	0.4338623285f,  -0.1862307936f,   0.0273368228f,   0.3468654454f,   0.1829560995f,   0.0776218101f,
	-0.3971069455f,  -0.1011172235f,  -0.1706313342f,  -0.2893543839f,  -0.0414500535f,  -0.0033016128f,
	0.2211373895f,   0.2951185703f,  -0.2123738825f,   0.3135715425f,  -0.3942077756f,  -0.2982544005f,
	0.1535413712f,   0.0913316756f,  -0.2900207639f,  -0.3714727163f,   0.0737001896f,   0.0415270850f,
	0.1512418836f,   0.0527593829f,  -0.1995881498f,   0.0164512675f,   0.0205525961f,   0.3342012167f,
	0.2233398706f,   0.0331214592f,   0.0823367164f,   0.3374118209f,  -0.0997623056f,  -0.2376898080f,
	-0.2414706051f,  -0.2114555240f,  -0.3589856625f,   0.5615137815f,   0.4074374139f,   0.0298102293f,
	0.2576601207f,  -0.2487811893f,  -0.0782910287f,   0.2835386693f,  -0.2414236367f,   0.2271414995f,
	-0.4720563591f,   0.0496929027f,   0.3979938924f,   0.0004599161f,  -0.3206739426f,   0.0177481379f,
	-0.0806469023f,  -0.3511957228f,  -0.0671494827f,   0.1722874939f,   0.1132248417f,  -0.5433359742f,
	0.2620313168f,   0.0724144280f,   0.3513038158f,   0.5186426044f,  -0.0663829744f,   0.0928117409f,
	-0.0109212771f,   0.0796420351f,   0.2890532911f,  -0.2286862880f,   0.0563958287f,  -0.0508924685f,
	0.1328867823f,  -0.1483406723f,   0.2157650292f,  -0.1548750550f,   0.4504065514f,  -0.5138320327f,
	0.1664640307f,   0.4545449913f,  -0.1283720732f,  -0.0414965451f,   0.4231930673f,   0.1737386882f,
	-0.2916361690f,   0.2277048826f,  -0.3280029297f,  -0.2372121215f,  -0.0734188855f,   0.5543960333f,
	-0.6324496865f,   0.3408570886f,   0.0302421488f,  -0.4135299921f,  -0.3438672423f,   0.6862245798f,
	-0.8509659171f,   0.3618589044f,   0.0617271475f,  -0.3952417374f,  -0.1875786632f,  -0.2845300138f,
	-0.0511675403f,  -0.1175178215f,  -0.1807429641f,   0.0052032624f,   0.4614163041f,  -0.6454522014f,
	0.2310771942f,   0.0238648523f,   0.0838901922f,  -0.0627265200f,  -0.3584386408f,  -0.1730954498f,
	-0.1176712289f,   0.1726690978f,   0.1259206533f,   0.4062573910f,   0.1924268305f,  -0.1486459970f,
	0.5599892735f,  -0.0142580513f,  -0.1924814731f,   0.2750977874f,   0.2066140920f,  -0.2616681755f,
	-0.2958593667f,   0.1677711755f,  -0.2461036593f,   0.2088876814f,   0.2673050463f,  -0.0312175602f,
	0.2295445204f,  -0.0357061215f,  -0.1170666292f,  -0.0089549748f,   0.4071204364f,   0.2936248481f,
	0.1601715684f,  -0.0312943086f,  -0.0560274757f,   0.3626206517f,  -0.5260109305f,  -0.4006510973f,
	-0.0984562561f,   0.1086059362f,  -0.2844862044f,  -0.3612978756f,  -0.3044260740f,   0.1383774132f,
	0.0157776084f,   0.2465911210f,   0.0476352945f,   0.3354019821f,   0.2050293684f,  -0.2334586382f,
	0.2956626713f,  -0.3274357915f,  -0.3824239969f,  -0.1305910349f,  -0.2197950333f,  -0.4057672024f,
	0.3083472252f,  -0.0925418362f,  -0.0203265883f,  -0.0829429701f,  -0.4625643194f,   0.4141464233f,
	0.3730004728f,   0.1242187247f,   0.3157806396f,   0.4297019541f,   0.4428921938f,   0.6096481085f,
	0.0403747819f,   0.0509007350f,  -0.4599049389f,   0.3776787817f,  -0.0310358405f,  -0.2322507352f,
	-0.1655960828f,  -0.0140611688f,  -0.0257151667f,  -0.0198075511f,  -0.0324783325f,   0.1557428986f,
	-0.1040859073f,  -0.2889409959f,  -0.3375680149f,   0.3883960545f,   0.5123674870f,  -0.1237339228f,
	-0.3104508817f,   0.4170956314f,  -0.1066561267f,  -0.1625567675f,  -0.7304490805f,  -0.0600743890f,
	0.0096103996f,  -0.5953974128f,   0.2771075666f,   0.1968412548f,   0.0897232071f,   0.0840445161f,
	0.4089718163f,   0.3938743770f,   0.0686844736f,  -0.2065966576f,  -0.2574290633f,  -0.3968745768f,
	0.1951289773f,  -0.3342235684f,   0.1183200255f,   0.3019227087f,  -0.2645915747f,  -0.2365022600f,
	0.1713992655f,  -0.3093307614f,  -0.3995991349f,   0.0752317905f,  -0.2987961471f,  -0.2401608825f,
	0.0970615968f,  -0.0513824783f,  -0.2102917582f,  -0.0090275705f,  -0.5928316116f,   0.4790345728f,
	0.0614376739f,   0.0233260728f,  -0.1412477642f,   0.1678502858f,   0.1731932014f,   0.0321295671f,
	-0.1667235792f,  -0.0392794721f,   0.1471077651f,   0.3089055121f,  -0.1615524739f,  -0.3253683448f,
	-0.0730797648f,  -0.1280752420f,   0.1935261339f,   0.4445851743f,   0.1222756803f,  -0.1323069036f,
	-0.2913122773f,  -0.6646300554f,  -0.3127611876f,   0.4597441852f,   0.2402591407f,  -0.0174478870f,
	-0.0464869626f,   0.1465777606f,   0.0809948817f,  -0.3734979331f,  -1.3232769966f,   0.2310649604f,
	0.3812407255f,  -0.0536804385f,  -0.1494693905f,   0.1698680073f,   0.3696696162f,  -0.3396714330f,
	-0.1618009955f,  -0.0193849187f,  -0.2445258349f,   0.1447576284f,  -0.3815834820f,  -0.2291980386f,
	0.1971629262f,  -0.2595356703f,  -0.2189049274f,   0.2753940523f,   0.0757787824f,  -0.0176494233f,
	0.0381844044f,   0.4040936232f,  -0.3564767838f,  -0.0561305359f,  -0.3192812502f,  -0.0406461917f,
	-0.1754145622f,   0.1894396842f,  -0.1086980999f,  -0.2815816998f,   0.0861594975f,   0.3580238223f,
	0.2867748439f,   0.2890960276f,   0.0330014117f,  -0.3028862178f,   0.6957405806f,  -0.0937976763f,
	-0.1455497742f,  -0.3354066908f,   0.2991946936f,  -0.1596496850f,   0.1937604398f,   0.2348535508f,
	0.0476135872f,  -1.1549645662f,   0.4982245862f,   0.1032397300f,  -0.0757522434f,  -0.3222147226f,
	-0.3985688388f,  -0.2629438937f,   0.3065834045f,  -0.4418124259f,   1.3022518158f,   0.4267660975f,
	0.6823079586f,  -0.0543671884f,  -0.0203135647f,   0.0738014579f,  -0.2754407823f,   0.2516468465f,
	-0.4005309343f,   0.3568664789f,  -0.1364563704f,  -0.4374009967f,  -0.9486843348f,   0.2792997956f,
	0.0247514751f,   0.3801089227f,   0.4602832198f,  -0.1722674817f,  -0.0250322372f,  -0.3965040147f,
	-0.2256956398f,  -0.3819045424f,  -0.1561838090f,  -0.3338294923f,   0.3122676909f,   0.5389153361f,
	0.1113019586f,   0.0888503045f,   0.2829266489f,  -0.0079300879f,   0.5622820854f,  -0.3143397868f,
	0.1827476770f,  -0.4216343164f,  -0.3474358618f,   0.4294821322f,  -0.2683345079f,   0.3687331080f,
	-0.9388068318f,  -0.3011282682f,   0.1681128442f,  -0.1744670868f,   0.2797994018f,  -0.1855766177f,
	-0.1787683368f,  -0.1202147901f,   0.3606143594f,   0.4726720154f,   0.5914595127f,  -0.0323845185f,
	-0.1595073044f,   0.0072301929f,   0.1903170794f,  -0.2093119770f,  -0.7858200073f,  -0.0997249633f,
	0.3649739921f,  -0.0536386259f,   0.1991478056f,   0.0818657726f,   0.1896172464f,  -0.3493900001f,
	-0.2397675663f,  -0.0765166581f,   0.2014651895f,   0.2008602023f,  -0.0434666388f,   0.2785843313f,
	-0.1862781793f,  -0.2419913709f,   0.2210524231f,  -0.5105613470f,   0.2471155822f,   0.1490984261f,
	0.3311904967f,   0.2767982483f,  -0.0910851508f,  -0.0704738423f,  -0.1464431584f,   0.5908295512f,
	0.6296812892f,  -0.2730948329f,   0.4863969386f,  -0.2618736327f,   0.0724536404f,  -0.2370559573f,
	-0.2260674536f,  -0.4654019177f,   0.3343181312f,  -0.2733400464f,   1.0277370214f,   0.2527066767f,
	0.7715874314f,  -0.3985549212f,   0.1124578491f,   0.0968168378f,   0.0038797790f,   0.4392629862f,
	0.1820851415f,  -0.2491198629f,   0.8242921233f,   0.0196642224f,   0.5140107274f,  -0.0878694132f,
	-0.2577615678f,  -0.3133439422f,  -0.2013097405f,   0.2969917953f,  -1.5017465353f,   0.2687817216f,
	0.8399290442f,   0.2992379963f,  -0.1062167585f,   0.2281978875f,  -0.3566187620f,  -0.1196051762f,
	0.1544981748f,   0.1067235768f,  -0.8131787181f,   0.0721305087f,  -0.1646670699f,   0.0056913444f,
	0.1843886673f,   0.1361181587f,   0.3000674546f,   0.1701573730f,   0.6986063719f,   0.0116304075f,
	-0.1717573404f,  -0.1564761996f,  -0.1756709516f,  -0.0422631502f,   0.0363711864f,   0.3344354928f,
	0.4264546037f,   0.4402965903f,  -0.9238874912f,   0.0623201318f,   0.1350786835f,   0.0435052551f,
	-0.3584386408f,  -0.4357096553f,   0.0697677583f,  -0.9537391067f,   1.6056091785f,  -0.4879115224f,
	-0.2490821332f,  -0.2169238031f,  -0.2030726373f,  -0.1358108073f,  -0.2500286102f,  -0.2253047377f,
	-0.0739340782f,  -0.1739061028f,   0.5370393395f,  -0.3680370450f,  -0.2008533925f,   0.1118884757f,
	0.1593136787f,  -0.1496310830f,  -0.0741844103f,  -0.1582020521f,   0.0329800360f,  -0.1441558897f,
	-0.1090936586f,  -0.0204330999f,   0.4605524838f,  -0.3176972568f,   0.0594557934f,   0.3300295174f,
	-0.1407872438f,   0.5193307996f,  -0.0639880374f,  -0.0050303638f,   0.1421123594f,   0.0475421138f,
	-0.0041983589f,   0.3627536595f,   0.2212291956f,   0.2194073945f,   0.1380663961f,   0.0256102588f,
	-0.4284042418f,   0.0161476787f,   0.1950154752f,   0.2289320379f,  -0.1205580160f,   0.2621604204f,
	-0.3754884601f,  -0.1338870227f,   0.2666496336f,  -0.4634668529f,   0.3299968839f,   0.4766283333f,
	0.2812001705f,   0.1738103032f,  -0.2165285796f,   0.0430100858f,  -0.1094024107f,  -0.5536101460f,
	0.6179449558f,  -0.0228824131f,  -0.5383660197f,  -0.4592602849f,   0.1306608319f,   0.3817654550f,
	0.5412799120f,  -0.6765955687f,   0.4900321662f,   0.3226404488f,   0.1781676412f,  -0.1820290089f,
	0.2179024816f,  -0.2475460023f,  -0.3925557435f,  -0.0411112234f,   0.3943335116f,  -0.6932887435f,
	-0.1101633087f,   0.3545550406f,   0.3806029558f,  -0.4285242856f,   0.1462626010f,   0.1418782175f,
	0.6015481353f,   0.2314924598f,  -0.9152958989f,  -0.4402401745f,  -0.0017111589f,  -0.0469032414f,
	0.3343516886f,  -0.3442646563f,   0.2220596820f,  -0.5735804439f,   0.2320420444f,  -0.1642251760f,
	0.1644702852f,   0.2310578376f,   0.2814311683f,   0.3083582222f,   0.0817543343f,   0.5925272703f,
	-0.1970370561f,   0.0812141225f,  -0.3205231130f,  -0.4874049127f,  -1.0259933472f,   0.2704194784f,
	0.1525957137f,   0.1026619598f,  -0.3885202408f,  -0.4683465660f,   0.5697598457f,  -0.3197778165f,
	-1.2304203510f,   0.2328009605f,   0.2838276029f,   0.4394531548f,   0.0253028702f,  -0.0142364288f,
	-0.2980826497f,   0.2394916862f,   0.4145459533f,   0.6221492290f,  -0.5459014773f,  -0.2821367383f,
	-0.5611861944f,   0.2589364052f,  -1.4721662998f,   1.1246703863f,   0.3628547192f,  -1.6267472506f,
	-0.5127066970f,   0.0576069467f,   2.9484496117f,   0.2917548418f,   0.8648509979f,   1.0050607920f
};

const float g_bias_spp[SPPHIDLAYER * SPPHIDNODE + OUTDIM] =
{
	-0.1081184968f,   0.1848805100f,   0.1265511364f,   0.0986255333f,   0.0723983794f,   0.0497978367f,
	-0.0158959925f,  -0.1025798246f,   0.0097325547f,  -0.2225124538f,  -0.0761903822f,  -0.1227181032f,
	-0.2215240896f,  -0.0133598838f,   0.0330360197f,   0.0183725394f,  -0.0098036928f,   0.0020720200f,
	0.0433000065f,  -0.0596794933f,   0.0398738794f,   0.0075417710f,   0.0361416377f,   0.0092327325f,
	0.0018905812f,  -0.0208057724f,  -0.0437998697f,   0.0161072295f,   0.0146324597f,   0.0619694814f,
	0.0315302908f,   0.0017720639f,   0.0957295820f,   0.0371975005f,  -0.0558979586f,   0.0673734844f,
	0.0033681027f
};

const float g_fat_min_spp[SPPINPUTDIM] = {
	0.19126f,   0.18813f,   0.01078f,   0.01041f,   0.98889f,   0.00000f,   0.02037f,   3.00000f,   0.00000f,
	0.00000f,   3.00000f,  13.00000f,   3.00000f,   0.00000f,   0.00000f,   0.00000f,   0.00000f,   0.00000f,
	3.00000f,   0.00000f

};

const float g_fat_max_spp[SPPINPUTDIM] = {
	46.20000f,  41.60000f,   5.50000f,   4.30000f,  37.10000f,  34.70000f,  81.50000f,  32.00000f,  54.00000f,
	35.00000f,  49.00000f,  45.00000f,  55.00000f,   1.00000f,   1.00000f,  54.00000f,  55.00000f,  32.00000f,
	51.00000f,   1.00000f
};

const float g_coes_fix_sdx24[FIXINPUTDIM * FIXHIDNODE + (FIXHIDLAYER - 1) * FIXHIDNODE * FIXHIDNODE + FIXHIDNODE * OUTDIM] =
{
	0.2492132932f,  -0.2901053727f,   0.1630475968f,   0.0603491329f,  -0.1231581792f,   0.2213925272f,
	-0.0513685942f,  -0.1852772534f,  -0.2339531779f,  -0.1838008612f,  -0.2261741459f,  -0.2146053016f,
	-0.1180196032f,   0.2165821791f,   0.3062191308f,  -0.0820625350f,  -0.1254337132f,   0.2380424142f,
	-0.0988843590f,  -0.2301556617f,   0.2062142640f,  -0.0552550852f,   0.2408614010f,   0.3657133281f,
	0.3127131164f,   0.3513779044f,   0.1998053640f,  -0.0134232631f,  -0.1687544584f,   0.0622606911f,
	0.0322016962f,  -0.0253165886f,  -0.3663459420f,   0.0950183272f,  -0.1388018429f,  -0.1512934119f,
	-0.2812807560f,  -0.2787924707f,  -0.1082324833f,  -0.2529038489f,   0.2046087086f,   0.3061676323f,
	0.2439649850f,   0.2092316747f,   0.1739476323f,   0.3607980907f,   0.2137963474f,  -0.2484499663f,
	-0.0056042662f,  -0.1421521753f,  -0.3095262647f,   0.2977145016f,  -0.1092580333f,  -0.3833482862f,
	-0.3649526238f,  -0.0278100260f,   0.3756999671f,   0.0281594563f,  -0.3002624214f,  -0.2115964144f,
	-0.1689552367f,   0.0756860226f,   0.1605783701f,   0.3549104035f,  -0.3178693354f,  -0.0516435206f,
	0.1365096867f,   0.2271540165f,  -0.3438963592f,   0.1395203620f,  -0.2422046363f,   0.2420329452f,
	0.0950286537f,   0.1210212633f,   0.4350080788f,   0.2660685480f,   0.2345771939f,   0.2739486992f,
	-0.1030996218f,  -0.2469039261f,   0.0585013404f,   0.1223879009f,   0.1443170756f,   0.0048469803f,
	-0.1367443204f,  -0.2238454372f,   0.1422001272f,   0.0534741916f,  -0.0685309470f,   0.3029269278f,
	0.4177842140f,   0.0993014202f,  -0.0094968546f,   0.3490978777f,  -0.2552572787f,  -0.1072478220f,
	0.3974651098f,  -0.0641445220f,   0.1748090684f,   0.3450421393f,   0.1023889408f,   0.1257538348f,
	0.1560269147f,   0.1187280193f,  -0.1642927825f,   0.0724000335f,  -0.3311455548f,  -0.0877580345f,
	-0.2450377792f,   0.1572240293f,  -0.2465424985f,   0.0736596659f,  -0.2937039137f,   0.0330168270f,
	0.1688901782f,   0.2291637659f,  -0.0958531573f,  -0.2682195902f,  -0.1753311753f,   0.0814614818f,
	-0.1216213927f,  -0.0535570309f,  -0.2075725049f,   0.0173839424f,  -0.1325452179f,   0.1413624436f,
	0.1373287141f,  -0.1402337700f,  -0.2516721487f,   0.1615969390f,  -0.0596820228f,   0.3224373460f,
	-0.1282305270f,  -0.3398649693f,   0.5432215333f,  -0.0070514451f,  -0.1103072092f,   0.0383759886f,
	0.1385164112f,  -0.1896570027f,   0.0298923813f,  -0.1232301667f,  -0.1591092795f,  -0.1805672050f,
	-0.0160402376f,   0.0343872048f,   0.1834772974f,  -0.0667226464f,   0.0622622855f,   0.2147300988f,
	0.2379087061f,  -0.3217107654f,   0.4099496305f,   0.0038129908f,   0.1979248375f,   0.1429327726f,
	-0.0019205357f,  -0.1432454586f,   0.1407071650f,  -0.0934557766f,   0.0234245788f,   0.1543290019f,
	-0.2957152128f,  -0.2906387150f,   0.3043973446f,   0.1332483590f,  -0.1265688241f,   0.2048880756f,
	0.0740128830f,   0.1075744033f,  -0.0511699766f,   0.2335694134f,   0.0029539240f,  -0.3576122820f,
	-0.2872019410f,  -0.2360305637f,   0.2537105083f,  -0.1316237152f,  -0.1077668667f,   0.2799838483f,
	-0.2261579037f,   0.2000332475f,  -0.1411754042f,   0.3718004525f,   0.2547101974f,  -0.2778750062f,
	0.1248968840f,  -0.1923066825f,   0.1432189643f,  -0.2769191563f,  -0.0571236126f,   0.0582031868f,
	0.2168401629f,   0.0591407232f,   0.1721641719f,   0.2096464187f,  -0.0398092680f,  -0.2739490271f,
	-0.1542443633f,  -0.2965704501f,  -0.3549020886f,   0.3452208042f,   0.0796479955f,   0.1879027188f,
	0.1333607733f,   0.1490655243f,  -0.0743055791f,  -0.0100427261f,  -0.2691828012f,   0.2265764028f,
	-0.1853370816f,  -0.1091935188f,  -0.2803342044f,  -0.0896100029f,  -0.2790708244f,   0.2626032531f,
	-0.2222500741f,   0.2310031950f,  -0.1614040583f,  -0.1848410070f,  -0.3154238462f,  -0.1008818150f,
	-0.2785808146f,   0.2495059967f,  -0.2200453579f,  -0.1333547384f,   0.4872786701f,  -0.0411286242f,
	-0.0745103359f,  -0.3765873313f,  -0.5907072425f,  -0.1126822084f,  -0.0654505640f,   0.2806813419f,
	0.2829394937f,  -0.2450855374f,   0.2164533436f,   0.0924853459f,   0.2474861443f,  -0.1961047053f,
	-0.1099114493f,   0.4708413482f,  -0.0698827207f,   0.0489622653f,   0.1366962790f,  -0.1128245071f,
	-0.2216756195f,   0.0000003668f,   0.4384751618f,   0.0240486749f,   0.3399428427f,   0.2330952436f,
	0.0520128496f,  -0.0880429149f,   0.2398718148f,   0.2672797740f,   0.0763682127f,  -0.0701671466f,
	-0.0029567331f,   0.3647226393f,   0.2253479511f,  -0.3837839961f,   0.2017403096f,  -0.3603009284f,
	0.2805917561f,   0.5500645041f,  -0.1428324729f,  -0.2978515923f,   0.0127598597f,  -0.5247352123f,
	-0.1907272637f,  -0.2535338998f,  -0.0621865503f,   0.1846479177f,   0.2019229084f,   0.0441708937f,
	-0.5521350503f,  -0.1184954122f,   0.1651390046f,  -0.2017728090f,   0.1456713974f,  -0.0005834490f,
	0.3607749045f,   0.0483803414f,  -0.0930730775f,  -0.2823979855f,   0.0857882127f,  -0.2489149719f,
	0.0235912986f,   0.2758277357f,   0.3086615205f,  -0.2858212292f,   0.5821705461f,  -0.0056214794f,
	-0.0493752249f,  -0.1012572050f,  -0.1364997178f,   0.0306265112f,  -0.4607254565f,   0.1965514272f,
	0.0142836850f,   0.0721336901f,   0.0622183233f,   0.3176369965f,   0.1458759159f,  -0.1579994410f,
	-0.3879876733f,   0.2114987522f,  -0.1315854639f,   0.0386391841f,   0.2602734566f,  -0.2076919675f,
	-0.2012967020f,  -0.3494571149f,   0.0619248748f,  -0.2006138414f,   0.0456244908f,   0.2663107514f,
	0.4590514600f,   0.1465321630f,  -0.0856522471f,   0.0592195839f,   0.2301799357f,   0.0432357490f,
	0.3011093438f,  -0.4016411304f,  -0.3533900380f,  -0.2958802879f,  -0.0932999253f,  -0.0001970351f,
	1.1018675566f,   0.3709111214f,  -0.1769173294f,  -0.0432950258f,   0.1406225562f,  -0.1300500035f,
	-0.1642163098f,   0.0380981900f,  -0.1857326478f,   0.0025771558f,   0.3479968607f,   0.0688540339f,
	-0.2198005468f,  -0.1274998933f,  -0.0449885130f,  -0.0424999297f,   0.0321820378f,  -0.0482997000f,
	-0.2896491885f,  -0.0656415820f,  -0.1335566491f,  -0.1660891771f,  -0.3428464830f,  -0.0690869987f,
	0.2695953548f,   0.0030407012f,   0.0310610831f,   0.3638177216f,  -0.3057032824f,  -0.0708811283f,
	-0.2258518487f,  -0.3574893475f,   0.0338291228f,  -0.2316522151f,   0.0268012397f,   0.1313628405f,
	-0.1988531649f,   0.2140303403f,  -0.1208888590f,   0.2880116403f,  -0.2675909102f,   0.1614117324f,
	-0.2408719957f,   0.2839649618f,  -0.3404916227f,   0.1020054519f,   0.1489316672f,   0.0664540380f,
	0.0889404118f,   0.2491554320f,   0.1132145822f,  -0.0546054728f,   0.3302374482f,   0.3236884773f,
	-0.1298699230f,   0.3413793147f,  -0.3023526073f,  -0.2567884326f,  -0.0108511336f,   0.1133074313f,
	0.3297813237f,  -0.1622837484f,  -0.2971898913f,  -0.3026058078f,  -0.2769866586f,  -0.2749532461f,
	-0.1649603993f,  -0.2565545142f,   0.1329861581f,  -0.0586284995f,  -0.3485717773f,  -0.0697900951f,
	0.3062778413f,  -0.0747734606f,  -0.1316413879f,  -0.2827308774f,  -0.2467324734f,  -0.1353556067f,
	-0.2445597798f,  -0.1961893886f,   0.1340325773f,   0.0166232884f,  -0.0243744850f,   0.0627405941f,
	-0.3455954194f,  -0.1854948550f,  -0.0426806286f,  -0.1548060030f,   0.1735139936f,  -0.3121649623f,
	-0.5992310643f,   0.3646849990f,  -0.0964262858f,   0.2853479981f,   0.2020360678f,   0.1725857556f,
	0.2873587012f,   0.2433196008f,  -0.2374253273f,   0.2555688024f,   0.1795166433f,   0.1052743047f,
	0.1351469010f,  -0.2496708781f,  -0.5638826489f,   0.1635102779f,   0.3166284263f,  -0.0854209960f,
	-0.0353588536f,   0.2108204663f,   0.1644402593f,   0.1251021475f,   0.1300394386f,   0.0553907491f,
	0.3889035583f,  -0.2368369699f,   0.2669467032f,   0.1680638045f,   0.2994424105f,   0.2451457381f,
	-0.1748296469f,  -0.1818309873f,  -0.1616370678f,  -0.1162169576f,   0.3137591183f,   0.2193967104f,
	0.1716212779f,  -0.2709445357f,   0.4515678585f,  -0.0207637437f,   0.0934296250f,   0.1348782033f,
	-0.0062758126f,  -0.4166557491f,  -0.3021750748f,  -0.2897362709f,  -0.2700416148f,  -0.4111161828f,
	-0.3714508712f,   0.2754692435f,   0.3018578589f,  -0.0104871755f,   0.2803671360f,   0.3853900135f,
	-0.0100460257f,  -0.3040900528f,  -0.3714494109f,   0.0019089417f,  -0.1438165754f,  -0.1791559309f,
	0.2602885067f,  -0.2601276040f,   0.2723854482f,   0.3104813695f,  -0.3308545351f,   0.0957165956f,
	0.0468757637f,   0.2199028730f,   0.1386839449f,  -0.1451451629f,   0.1465401351f,  -0.2949456275f,
	0.1804476976f,   0.1703374535f,   0.2576614916f,  -0.4339016080f,   0.2945333421f,   0.2588369846f,
	-0.1004151478f,  -0.2868590951f,   0.3508326709f,  -0.1208851933f,  -0.2882957757f,   0.2377305627f,
	-0.2990327775f,   0.1187766790f,   0.3210560083f,   0.3774361014f,  -0.2283708006f,   0.0423732027f,
	-0.3563464880f,  -0.3220846951f,  -0.0031624848f,   0.1030057222f,   0.1566282660f,  -0.0031819176f,
	0.2465938479f,  -0.1856416017f,   0.0875716507f,  -0.3773545027f,  -0.0003683536f,   0.1391733885f,
	-0.1153604761f,  -0.1844377220f,  -0.2501256168f,  -0.0505988747f,  -0.3482654691f,   0.2286073565f,
	0.2583890259f,   0.3884594440f,  -0.6184531450f,   0.8306261897f,   0.3939398527f,   0.7296093702f,
	-0.4723097980f,   0.3552215099f,  -0.3120729923f,   0.1253402829f,   0.2230622023f,  -0.1104667187f,
	-0.1508092135f,  -0.3348366320f,   0.1298934221f,   0.3230097294f,  -0.0163546819f,   0.2986015081f,
	0.2145175636f,  -0.2528771758f,   0.0830504075f,  -0.0283813942f,  -0.4038107991f,  -0.2818939388f,
	0.2679880857f,   0.3788053393f,   0.3844469488f,   0.1277355552f,   0.0744682699f,  -0.2801239789f,
	-0.0237920526f,   0.1694288254f,   0.2365428209f,  -0.3624862731f,   0.2358000278f,   0.2208808959f,
	-0.0753367022f,   0.2648735940f,   0.2403326035f,   0.2003832906f,   0.2194782048f,   0.3584530652f,
	-0.1212462857f,   0.2497856617f,  -0.1369176358f,  -0.4058681130f,  -0.2129921019f,   0.0638895482f,
	0.2077009678f,   0.2620775998f,   0.2523378432f,   0.3197914362f,   0.3592043817f,   0.1424976885f,
	-0.2938818932f,   0.3550176919f,  -0.2619998157f,  -0.0750430524f,   0.2158847749f,   0.4435001612f,
	0.4381088018f,   0.1697882414f,  -0.1934077591f,   0.0615338683f,  -0.0234116185f,   0.4092181921f,
	0.0421787240f,   0.3581186533f,   0.3787589967f,  -0.2562057972f,  -0.2530187964f,  -0.2884621620f,
	-0.1343384534f,   0.2840611935f,  -0.4414612651f,   0.1284030974f,  -0.0990867689f,  -0.1844594479f,
	0.1149399504f,   0.1173597574f,   0.3140917718f,   0.0833558440f,  -0.0112557597f,   0.1497311890f,
	0.1975333989f,   0.2215351760f,   0.1317920089f,   0.3902415037f,  -0.1825866699f,  -0.1591204554f,
	-0.0149898864f,   0.2564192116f,   0.0328365229f,   0.2762846053f,   0.1358522922f,   0.5166914463f,
	-0.4067268074f,  -0.3363852501f,  -0.2238423377f,  -0.0443353355f,   0.0137377167f,  -0.4852922261f,
	-0.3568227887f,  -0.0583946407f,   0.2384575605f,   0.0179951191f,  -0.1646864712f,  -0.3488332033f,
	-0.1075793505f,  -0.1428469718f,   0.1712135077f,   0.2209708095f,  -0.1435906887f,  -0.0736189485f,
	-0.2900720835f,  -0.3038857579f,  -0.3113702536f,  -0.3941058815f,  -0.2345062792f,  -0.0653491616f,
	-0.1657069921f,   0.2191717178f,   0.3589708507f,  -0.0646400452f,  -0.3970402777f,  -0.0484359823f,
	0.4200372994f,   0.0841158032f,   0.1811723560f,   0.4483604133f,  -0.1228883043f,   0.0905884728f,
	-0.1556958854f,  -0.1282468736f,  -0.1420051754f,  -0.0396707058f,  -0.1578888595f,  -0.2403785586f,
	0.1078397408f,   0.1149317548f,   0.3026847541f,  -0.2453160137f,   0.2092183232f,  -0.0506267324f,
	-0.2613005042f,   0.4990839660f,   0.2700152397f,   0.5338897705f,  -0.7458494306f,  -0.8351903558f,
	-0.6622378826f,  -0.3039116263f,  -0.0109255109f,   0.2832539678f,   0.1757264137f,  -0.4343433678f,
	0.2556969821f,   0.0542534590f,   0.1846454442f,   0.3975380063f,   0.3538147509f,  -0.2668860257f,
	0.2807886302f,  -0.3706948161f,  -0.3906471431f,  -0.0892155170f,  -0.6807428598f,  -0.4167303741f,
	0.2555738986f,  -0.0075669289f,  -0.3104214668f,   0.1864801049f,   0.1486000270f,   0.1862139702f,
	-0.0326342508f,   0.0703543872f,   0.4135642350f,   0.0108954059f,  -0.3143813014f,  -0.1042761281f,
	0.0957105756f,   0.3911788762f,  -0.2730363309f,  -0.0519705266f,   0.4449686706f,   0.4155347049f,
	0.2491793931f,  -0.1396779716f,   0.0106122186f,  -0.2452966273f,  -0.1171113774f,   0.1201652139f,
	-0.0089422651f,   0.2047873884f,  -0.2224515676f,   0.2396550924f,  -0.2711033821f,   0.0486675538f,
	0.3707632422f,  -0.1090736613f,   0.2568584979f,  -0.0425439738f,   0.8876519203f,   0.3707952201f,
	1.1971142292f,  -0.0934698284f,   0.1346871108f,   0.3853341341f,  -0.0369623750f,   0.3927024603f,
	-0.3195042908f,  -0.3788343072f,  -0.1187854037f,   0.5140712261f,  -0.0251494348f,  -0.2111696899f,
	0.0083975578f,  -0.0077663441f,   0.0844080374f,   0.2462020665f,  -0.4615008533f,   0.0661750659f,
	0.4500975013f,  -0.1752448678f,  -0.0639092252f,   0.3812828064f,  -0.5158864856f,   0.1726456732f,
	0.0875333622f,  -0.2506549358f,   0.0128209488f,  -0.2349268049f,  -0.3101378381f,   0.3872427940f,
	0.4059979916f,   0.0629514381f,   0.1203872561f,  -0.3958853185f,   1.0376789570f,   0.2975389957f,
	0.7338329554f,  -0.0191717744f,   0.0753068700f,   0.3686789274f,  -0.2889652550f,   0.5460297465f,
	-0.2932576835f,   0.3480353057f,   0.2724283636f,  -0.0730787516f,  -0.0937931538f,   0.1877874136f,
	-0.0444641076f,   0.2624403834f,  -0.1990069300f,   0.5789102912f,  -0.0786744133f,  -0.2951981723f,
	0.0936346278f,  -0.2918890417f,  -0.3406326771f,  -0.0465874374f,  -0.0526202172f,  -0.1341892481f,
	-0.5027202964f,  -0.5279157162f,   0.2705254555f,  -0.0670017079f,  -0.2651989460f,  -0.1218203455f,
	0.1524124593f,  -0.5321252346f,  -0.2609696686f,   0.5362333655f,   0.5392844081f,   0.4790129364f,
	-0.1645559222f,   0.0967845842f,   0.2752624452f,  -0.9023309946f,   0.1938078105f,  -0.4846547842f
};

const float g_bias_fix_sdx24[FIXHIDLAYER * FIXHIDNODE + OUTDIM] =
{
	0.0441991538f,   0.1049927324f,   0.0403519161f,  -0.0216924287f,  -0.0121767838f,   0.0809929594f,
	-0.0398296975f,   0.0306975953f,   0.0139935613f,   0.1417002827f,   0.0496158786f,   0.0886597261f,
	-0.0283946227f,   0.0000000000f,  -0.0689662844f,   0.0000000000f,   0.0414711460f,   0.0493632853f,
	-0.0590086244f,  -0.0450235717f,   0.0445115231f,   0.0094374176f,  -0.0268794876f,   0.0220451728f,
	0.0239718910f,  -0.0130836330f,   0.0912230909f,   0.0000000000f,   0.0097710798f,  -0.1045039520f,
	-0.0108260931f,   0.0352807976f,   0.1076705530f,  -0.2348167002f,   0.0081311064f,  -0.0143682882f,
	0.0239895899f
};

const float g_coes_float_sdx24[FLTINPUTDIM * FLTHIDNODE + (FLTHIDLAYER - 1) * FLTHIDNODE * FLTHIDNODE + FLTHIDNODE * OUTDIM] =
{
	-0.0896923468f,  -0.4523617029f,  -0.3965242207f,  -0.4382544458f,   0.7588698864f,  -0.9607198834f,
	0.7079145908f,   0.1302519739f,  -0.4153473973f,  -0.0898197889f,   0.1719101667f,   0.4670784473f,
	-0.2992706001f,   0.5549782515f,  -1.0269336700f,   0.5840054750f,  -0.0228702631f,   0.0473629609f,
	0.0704219639f,  -0.0858436823f,   0.2369444668f,  -0.2968456149f,   0.3514640033f,  -0.2325712293f,
	-0.1052774489f,   1.4130296707f,  -0.2232848406f,   0.3381201029f,   0.1562574357f,   0.5173575878f,
	0.1665990949f,   0.2641409338f,   0.4362748265f,  -0.0143470224f,   0.3813980222f,   0.3784431815f,
	0.2159237266f,  -0.0521664917f,   0.2684072554f,  -0.2609498799f,  -0.0196936969f,  -0.2813018262f,
	-1.0167374611f,   0.3514374197f,  -0.3385199308f,   0.1641273797f,  -0.1336194128f,  -0.5325714350f,
	0.1472558081f,   0.5312694311f,  -0.2784166336f,  -0.3242450655f,  -0.3768777251f,   0.2056751847f,
	0.0690867230f,  -0.0185795985f,   0.3299581707f,   0.3102969527f,   0.3487090468f,  -0.4147137105f,
	0.0086482037f,   0.7415110469f,   0.2004282475f,  -0.0409610756f,  -0.2387042791f,  -0.1420364827f,
	0.2973155379f,  -0.1193049625f,  -0.2659208179f,  -0.1496343166f,   0.1317446977f,   0.1098441407f,
	0.4668456912f,   0.3017996848f,  -0.1390638351f,   0.1192372888f,  -0.2070631832f,   0.3551845551f,
	0.4502438009f,  -0.2031248510f,  -1.2364385128f,   0.7238681316f,  -1.1619136333f,   0.5893979669f,
	0.0572228245f,  -0.2024941146f,   0.0772054940f,  -0.0912363529f,   0.2259059697f,  -0.4498918653f,
	-0.3348885477f,  -0.0414593145f,   0.1061804220f,  -0.3035037220f,   0.0518444143f,   0.0779983774f,
	-0.0581829138f,   0.4763117135f,  -0.0806101784f,   0.2237657607f,  -0.4104578793f,   0.2840071917f,
	-0.2137114406f,  -0.5353918672f,   0.3622073233f,   0.1591086090f,   0.1750220358f,   0.2792458534f,
	0.0348301493f,   0.3009358644f,  -0.1579858959f,  -0.2612145841f,  -0.0207398757f,  -0.8084353805f,
	-0.0659176484f,  -0.4014512599f,   0.0342234746f,  -0.3138154149f,  -1.8145428896f,   1.0646686554f,
	-1.0423473120f,   0.3017682135f,   0.0842923597f,   0.0006038194f,  -0.0697663799f,  -0.3545001149f,
	0.1541163623f,  -0.1759844869f,  -0.4375008643f,   0.3446901441f,  -0.0677760318f,  -0.1999338716f,
	-0.3160495758f,  -0.0689903349f,   0.2403534949f,  -0.3200113475f,   0.2493254840f,   0.3380888999f,
	-0.1651572585f,   0.8403869271f,  -0.1951199174f,  -0.5006990433f,  -0.8765118122f,  -0.2905567884f,
	-0.5778006315f,   0.3040117621f,   0.0876584649f,  -0.2495397627f,  -0.1901131421f,   0.2061982900f,
	-0.6063643098f,   0.2702122033f,   0.1484418362f,   0.5670762658f,   0.5328037143f,  -0.7685334682f,
	-0.3091049492f,   0.5516082048f,  -0.5711085200f,   0.2759749591f,   0.2391409427f,  -0.1373322606f,
	-0.1714600623f,  -0.3809436262f,  -0.0814720616f,  -0.0826058760f,  -0.0048469463f,  -0.0800460130f,
	0.1736888587f,  -0.8510859013f,   0.2968484461f,   0.2154746950f,  -0.3510829508f,   0.4477505088f,
	0.5070642233f,  -0.5097588301f,   0.1801348031f,   0.5434511304f,  -0.5392870903f,  -0.3252472281f,
	-0.3613131642f,  -0.4783178270f,  -0.3875117302f,  -0.0317399092f,   0.0378860272f,   0.0778212026f,
	0.2740776539f,  -0.2661294341f,  -0.3555403352f,   0.7061249614f,   0.2188244462f,  -0.3015175164f,
	-0.1938790381f,  -0.2670885921f,   1.4842971563f,  -0.0457258224f,  -0.5350072384f,  -0.0310525782f,
	-0.3862981498f,  -0.2029047161f,  -0.1956118941f,  -0.3223787546f,   0.1239790618f,  -0.1779561788f,
	0.3209850192f,  -2.3063120842f,   0.6021939516f,   0.0746522173f,   0.3987742960f,   0.1711743325f,
	-0.0441758409f,  -0.3448492289f,  -0.1391281486f,  -0.6809675097f,   0.6805523038f,  -0.1648692042f,
	-0.0924120918f,  -0.3996031582f,   0.0372120626f,  -0.3348433673f,   0.3916751742f,   0.2276865840f,
	-0.0304668453f,  -0.0153827537f,   0.2283204347f,   0.1579793692f,   0.0523063838f,   0.4720368087f,
	0.0255301725f,   0.1014244407f,   0.5680297017f,   0.4211682677f,  -0.3026191294f,  -0.7746822238f,
	-0.5994781256f,   0.0439191610f,  -0.0733474717f,  -0.1037038490f,  -0.5872219801f,  -0.1164927036f,
	0.2682843804f,   0.0139846886f,   0.0541465692f,   0.1068746895f,  -0.3686359525f,   0.2730714381f,
	0.1521986276f,   0.4594233930f,   0.2785757184f,  -0.0355258100f,   0.2126647979f,  -0.0460003093f,
	1.0094997883f,   0.2680159807f,  -0.0787734538f,  -0.1490659714f,   0.0532953627f,  -0.0196952783f,
	-0.4697696269f,   0.1196348295f,  -0.0103413900f,   0.2000112087f,  -0.1524637938f,  -0.1626813561f,
	-0.0852964371f,  -0.1636973172f,   0.2452858388f,   0.1091525629f,   0.1725769043f,   0.3443410397f,
	-0.4678619802f,  -1.0452028513f,   0.4071431756f,  -0.1644774526f,  -0.3565519750f,  -0.2537365556f,
	-0.1249002144f,   0.3833045959f,   0.1455409527f,   0.4656796753f,  -0.1645340174f,   0.2113159597f,
	-0.0713220015f,   0.3909281492f,   0.2839173079f,  -0.1185816452f,  -0.1789515465f,  -0.0254495982f,
	0.0109953554f,   0.2612715364f,   0.2776429057f,  -0.2574553490f,  -0.2061938047f,  -0.0575873777f,
	0.0070333816f,  -0.0725772604f,   0.1882329732f,  -0.3290026486f,  -0.0216716174f,   0.2656113207f,
	-0.0233769696f,  -0.2386570871f,  -0.3050187826f,  -0.2313465029f,  -0.6416078806f,   0.2583023608f,
	0.1063736603f,   0.3529958129f,   0.0822308138f,  -0.2559486926f,  -0.4015011191f,   0.1244105324f,
	-0.0887014940f,  -0.1277736872f,  -0.3899472952f,  -0.0940874666f,  -0.2989794612f,  -0.1151514873f,
	0.3341867924f,   0.4006708860f,   0.0597976036f,  -0.0162285008f,  -0.0269213542f,  -0.2054765671f,
	-0.1354127377f,   0.1745493859f,   0.0614019372f,   0.1928900927f,   0.1019377708f,   0.4900979996f,
	-0.5226161480f,  -0.0219429899f,   0.2801089585f,   0.0931688771f,   0.0681656301f,   0.0464383066f,
	-0.1798606962f,  -0.3837537169f,  -0.0635735542f,  -0.3023039699f,   0.0324398428f,   0.2658486366f,
	0.0858380049f,  -0.0234233383f,  -0.7325496674f,  -0.0275613386f,  -1.8937886953f,   0.3796897531f,
	-0.3092000782f,  -0.6297051907f,  -0.3463071585f,  -0.1567423046f,   0.3328190446f,   0.3172091842f,
	0.4736986458f,   0.6449438930f,  -0.0277113523f,   0.3981213570f,   0.0998965874f,  -0.3620989025f,
	0.0245320573f,  -0.1957418025f,  -0.2218474597f,  -0.2098906934f,   0.0434973687f,   0.2857092321f,
	-0.0105484352f,  -0.0945162699f,   0.2114023715f,  -0.3968726993f,   0.1866231859f,   0.1189086512f,
	0.1837491393f,   0.0221946463f,  -0.3412086964f,   0.1408002377f,  -0.2743234336f,   0.1164156199f,
	-0.3995654285f,  -0.3023546934f,  -0.3645966351f,  -0.1839841902f,   0.3527588844f,  -0.1817270219f,
	-0.3189324141f,  -0.1745596379f,  -0.0083510578f,  -0.1481220722f,   0.3240388632f,  -0.2131228745f,
	0.2441262603f,  -0.2399928868f,  -0.4072640538f,   0.3521941304f,   0.1123232245f,  -0.3709704578f,
	-0.3318869174f,  -0.2076268941f,  -0.3330998421f,  -0.2912747264f,   0.0613395497f,  -0.7231090665f,
	-0.1910683215f,   0.2553818822f,  -0.2819940150f,   0.1837185174f,   0.3358069062f,   0.6591985822f,
	-0.5160849690f,  -0.1115242690f,   0.2402134538f,   0.0498817265f,  -0.1500366330f,  -0.5904058218f,
	-0.0261455439f,  -0.1849533170f,   0.2364180982f,  -0.1695269644f,  -0.3468398750f,  -0.1886744052f,
	-0.2586673796f,   0.2807742059f,   0.2810206115f,  -0.1050082222f,   0.1927053332f,  -0.0816645101f,
	0.2021488398f,  -0.1393072605f,   0.1954060644f,  -0.0091601014f,  -0.3146317899f,  -0.2126201093f,
	0.4694709182f,   0.0130044762f,  -0.0545882508f,   0.2615565658f,  -1.2032674551f,  -0.1553292125f,
	-0.9161850810f,  -0.8677427769f,  -0.5813583732f,  -0.5556471348f,   0.3331739008f,   0.2674931884f,
	0.3708652258f,  -0.0177404471f,   0.4757521451f,  -0.0999070108f,   0.1399243027f,   0.2124681473f,
	-0.0964334309f,  -0.2924522161f,   0.1111807674f,   0.1037050560f,  -0.1755751222f,  -0.1472936571f,
	0.1571888328f,   0.0029278994f,  -0.7641658783f,  -0.0384542346f,   0.2539548874f,  -0.2804346085f,
	0.0998905301f,  -0.2757168412f,   0.3338873088f,   0.1888985038f,   0.0347874463f,  -0.3927524388f,
	0.8489201069f,   0.0793973804f,  -0.7248686552f,  -0.0836773887f,  -1.3043330908f,   0.5662298799f,
	-2.6557638645f,  -0.5635541677f,  -1.2115619183f,  -1.0491646528f,   1.4271559715f,  -0.2136177123f,
	0.2665947974f,  -0.3222225308f,   0.4854385853f,  -0.3971536756f,   0.2447176725f,  -0.0087739537f,
	0.3631846309f,   0.1536895633f,  -0.5996469855f,   0.0192621145f,  -1.0040591955f,   0.2641869783f,
	-1.0107154846f,  -0.4350312948f,  -0.3359074593f,  -0.0623056628f,   0.5949518085f,  -0.4847305119f,
	-0.2841770053f,  -0.4463927150f,   0.1411440670f,   0.0428119078f,   0.3616815805f,  -0.3468997777f,
	-0.4411464334f,   0.3568320572f,   0.2784194946f,   0.2235618830f,   0.4656852782f,  -0.4787306488f,
	0.6536716819f,   0.0831221268f,   0.5880089998f,   0.5586728454f,   0.1967101693f,  -0.2273937762f,
	0.3961653113f,  -0.4748174548f,  -0.0382734872f,  -0.1899407804f,  -0.5106833577f,   0.2686059773f,
	-0.0783107653f,   0.2010036856f,   0.7851402164f,   0.3224756122f,   0.1727971286f,  -0.1538083404f,
	0.6187063456f,   0.0148117878f,   0.4784066081f,   0.3756577075f,  -0.4294901192f,  -0.1921566129f,
	0.0839375108f,   0.4922222495f,  -0.4307782352f,  -0.3010145426f,   0.0564438291f,   0.2086787671f,
	0.0733299926f,  -0.0212650709f,   0.4244504273f,   0.3178742230f,   0.6214501262f,  -0.0590096004f,
	0.9044167399f,   0.1051210165f,   0.3394803703f,   0.3411433995f,  -0.4597731829f,   0.0677229986f,
	0.3823462129f,  -0.2479376644f,   0.0228014421f,   0.3459817171f,   0.2313874364f,   0.1556428373f,
	0.5392401814f,   0.1239209697f,  -0.1476868689f,   0.0540328734f,  -1.1881102324f,   0.0168150403f,
	-1.1136969328f,  -0.6572362781f,  -0.5241671801f,  -0.6943938732f,   0.6383746266f,   0.3626212776f,
	0.2532503903f,  -0.3063680828f,  -0.0387377776f,  -0.0736404583f,  -1.0538586378f,   0.4071788192f,
	0.3076292276f,  -0.3661106229f,   0.2074127346f,   0.0449736640f,  -0.2149592787f,   0.3129635155f,
	0.0449499264f,  -0.1556216478f,  -0.1106120050f,   0.3434188366f,  -0.2133362293f,  -0.1125279665f,
	-0.3731113076f,  -0.2260915637f,  -0.0615442172f,  -0.0265869796f,   0.0577315092f,  -0.3083913326f,
	0.1135922670f,  -0.4073741436f,   0.2508947849f,   0.2422734499f,   0.2828280330f,  -0.0199259222f,
	-0.0005416572f,  -0.2781274915f,  -0.1641284525f,   0.2359473109f,   0.0054150820f,  -0.3191492558f,
	0.2701730728f,  -0.1386822462f,   0.0824357569f,   0.1948630214f,   0.0537508428f,  -0.1132708490f,
	-0.3549618423f,   0.0685024038f,   0.9397164583f,  -0.4319067597f,   1.0459352732f,  -0.5429678559f,
	-0.3944954872f,  -1.0455288887f,   0.0208955724f,  -0.3212555051f,   0.2254234552f,   0.4292304218f,
	0.2794007063f,   0.2457786500f,   0.2809902132f,  -0.0837984234f,   0.1064870059f,   0.5181415081f,
	0.0040936768f,  -0.3726283610f,   0.2828172445f,   0.1540096402f,  -0.2285989821f,  -0.3265736997f,
	-0.2067942172f,   0.0885525942f,  -0.3737742603f,  -0.0346733928f,  -0.3491964638f,  -0.2617833614f,
	0.2744955420f,   0.1231214404f,  -0.3650989830f,  -0.1583044678f,   0.2667953372f,  -0.1429836154f,
	0.2290092111f,  -0.1275177896f,  -0.2528512776f,  -0.2177393436f,  -0.1250287443f,  -0.0008317404f,
	0.9825794697f,  -0.2323831022f,   0.1208292693f,  -0.1413798183f,   0.0849428177f,  -0.0551559478f,
	0.1622441262f,   0.2512841225f,  -0.0923831165f,  -0.1096334457f,   0.3550707996f,  -1.0968465805f,
	-0.7438417077f,  -0.1565171778f,   0.1175888777f,   0.8489978313f,  -0.3731301725f,  -0.3233799040f,
	0.3537860215f,   1.1769697666f,  -1.4280958176f,   0.1380963624f,   0.4709271193f,   0.2035361528f,
	-0.4086503685f,   0.1038687229f,   0.2735779285f,  -0.8039178252f,  -0.1955343485f,  -1.3848978281f
};

const float g_bias_float_sdx24[FLTHIDLAYER * FLTHIDNODE + OUTDIM] =
{
	0.1045229435f,   0.1978781074f,   0.0611012839f,   0.1401317269f,   0.0310756061f,   0.1346150637f,
	-0.0520548522f,   0.0133149708f,   0.0884663090f,   0.0833614096f,   0.0950869992f,  -0.2355454117f,
	-0.1444219947f,  -0.0239705089f,  -0.0299166720f,  -0.0215456411f,   0.0724329501f,   0.0508457385f,
	-0.0457044840f,  -0.0140185291f,   0.0000000000f,   0.1877214164f,  -0.0329976119f,  -0.0039592250f,
	0.0356655344f,   0.0824792609f,   0.1327430606f,   0.0160998181f,   0.0731262118f,   0.0394263007f,
	-0.0318309255f,  -0.0380795673f,   0.0000000000f,  -0.1126898453f,   0.0000000000f,   0.0176844802f,
	0.0745302290f
};

const float g_coes_pre_sdx24[PREINPUTDIM * PREHIDNODE + (PREHIDLAYER - 1) * PREHIDNODE * PREHIDNODE + PREHIDNODE * OUTDIM] =
{
	-0.1402038932f,  -0.2848409414f,   0.0935533270f,  -0.1116105840f,  -0.0528851748f,  -0.2443586588f,
	0.1986200362f,   0.0394529328f,  -0.0964079276f,   0.4293528199f,  -0.3946958482f,   0.7183665633f,
	0.3075920939f,   0.1461668462f,   0.1199548766f,  -0.6225254536f,  -0.1442731917f,   0.3252193332f,
	-0.3894594610f,  -0.2005210668f,   0.4019604027f,  -0.2905475199f,  -1.0723487139f,  -1.0146356821f,
	0.1462735832f,  -0.0390389077f,  -0.1724837422f,   0.1611586362f,  -0.1061995253f,  -0.0353664570f,
	-0.2084320039f,   0.0324096866f,  -0.7265923023f,  -0.7933817506f,   1.0241528749f,  -1.2055637836f,
	0.2783575952f,   0.1567038596f,   0.4455011785f,   0.3945385814f,   0.0117271720f,   0.0291228574f,
	-0.3778071404f,   0.3102123141f,  -0.0164523143f,  -0.0199382789f,   0.4257881641f,   0.5178096294f,
	-0.3736055195f,   0.1531992108f,   0.3396998048f,  -0.0854602680f,  -0.5976721644f,  -0.2498576194f,
	0.1742828339f,   0.5115833282f,   0.1270980239f,  -0.0011536861f,   0.1623763442f,  -1.4594806433f,
	0.1936187297f,   0.0621214733f,  -0.2452171594f,  -1.7858897448f,   1.3963077068f,   0.1289327294f,
	0.6334407330f,  -0.0131062074f,  -0.1755270511f,   0.3206675649f,   0.0295649618f,  -0.4506165087f,
	-0.0451742522f,   0.3777772486f,   0.2697492242f,  -0.3504053354f,   0.3471421301f,   0.1691816300f,
	0.2662785351f,   0.1303496063f,   0.4120482206f,  -0.2865061760f,  -0.3115814924f,   0.4021724164f,
	-0.1703332663f,  -0.3378922939f,  -0.3613867760f,  -0.1306398213f,  -0.0179324448f,  -0.2425377816f,
	0.1714859009f,  -0.3078380823f,  -0.2366283685f,   0.4273932576f,   0.0304264426f,   0.3666671515f,
	-0.0025612707f,  -0.0178191066f,  -0.5668124557f,  -0.7908946872f,   0.6758316755f,  -0.0158150773f,
	-0.2231098861f,   0.1828792095f,   0.5308935642f,   0.3407306373f,  -0.1124099046f,   0.0886766165f,
	-0.1589021087f,  -0.1486462653f,  -0.4437803924f,  -0.2177483439f,  -0.2659123242f,   0.3107304573f,
	-0.1873046160f,   0.0873488784f,  -0.2353859842f,  -0.2181082964f,   0.3202453852f,   0.0421112776f,
	0.1783715487f,  -0.2824999392f,   0.5961984396f,  -0.1740368754f,  -1.0328190327f,  -0.0303061679f,
	-0.4576613903f,   0.2811259031f,   0.1769157350f,  -0.2932289839f,   0.6197595000f,   0.3721569479f,
	-0.0860546380f,   0.3025545776f,   0.5220736265f,   0.2192057818f,  -0.7245108485f,  -0.0970487073f,
	0.0138416793f,   0.2533246875f,   0.3953562975f,   0.0119542638f,  -0.2719107270f,  -0.0459753275f,
	0.0972708762f,   0.1049803644f,  -0.1346811950f,  -0.3630909026f,  -2.7049345970f,   0.2228217125f,
	-0.8265482187f,  -0.3342281282f,  -0.0616424084f,   0.0705152526f,   0.0418146402f,  -0.0969362482f,
	0.3941590786f,  -0.3327389657f,   0.6274625063f,  -0.0967028141f,  -0.3028392792f,   0.1368272156f,
	0.3915518224f,  -0.1092930883f,  -0.1731344759f,  -0.2609049082f,   0.4548294246f,  -0.0663652122f,
	-0.3950165808f,  -0.1700661927f,   0.6995136738f,   0.0207101181f,   0.2631472945f,   0.1021216214f,
	0.2044886500f,  -0.2369709611f,   0.2099098712f,   0.0313895494f,  -0.2184357494f,   1.1245076656f,
	0.3600884378f,   0.0733044595f,  -0.0597544648f,  -0.2822844386f,   0.3381221294f,   0.2496063560f,
	0.1248048842f,   0.2340050191f,   0.1287463903f,  -0.2026940733f,   0.3407739699f,  -0.7482610345f,
	0.2529202998f,   0.1553801298f,   0.0608406700f,   0.3751702309f,  -0.1708813459f,   0.1209891886f,
	0.2235570550f,   0.4636748731f,  -0.2595506608f,  -0.3535188138f,   0.4186455011f,   0.2531554103f,
	0.2635713816f,   0.4304257631f,   0.2404117733f,  -0.0755599663f,   0.1362431049f,  -0.2757951617f,
	0.1109873503f,  -0.1819957197f,  -0.1538907140f,   0.2945553958f,  -0.2156730741f,  -0.9280828238f,
	-0.0484286435f,  -0.2097371817f,   0.2933938205f,   0.2936917245f,   0.0575548895f,  -0.0473837107f,
	0.2795480490f,   0.0083303154f,  -0.3411634862f,   0.1183125973f,  -0.0401392318f,   0.1908344328f,
	0.3313957453f,   0.4541631937f,   0.3446316421f,  -0.1422582865f,  -0.0161162764f,  -0.2543391287f,
	-0.1483852714f,  -0.2005580515f,   0.1677316427f,   0.2678471208f,  -0.5148427486f,  -0.0370897166f,
	-0.1590434313f,   0.2184401155f,  -0.6447852254f,   0.0415526628f,   0.3370590210f,   0.1605067253f,
	-0.0106793800f,  -0.2337586433f,  -1.1386135817f,   0.2865539491f,   0.0067198663f,  -0.0832026973f,
	-0.4348877668f,   0.7059191465f,   1.1783301830f,  -0.0539468862f,   0.5864609480f,  -2.5357918739f,
	0.1542946100f,   0.2646276355f,  -2.1113374233f,   0.0509031415f,  -1.2006099224f,   0.4463449121f,
	-0.2360727638f,   1.0580003262f,  -2.4315733910f,   0.1612803191f,  -0.7315722704f,  -0.1929203272f,
	0.2061660737f,  -0.4799974859f,  -0.2847057581f,  -0.1784785092f,   0.2755451798f,   0.0443170778f,
	-0.1909003109f,  -0.0492533445f,  -0.0177659299f,   0.0202196836f,  -0.2782689631f,  -0.1163245514f,
	-0.8351466060f,   0.3495246470f,   0.2614767253f,   0.0221006330f,  -0.2014830261f,   0.2260572612f,
	0.0567123853f,  -1.3219146729f,   1.2059586048f,   0.1165659502f,   0.1733012050f,   0.2300677747f,
	-0.0469622128f,   0.1578658819f,  -0.5282571316f,   0.3181472421f,   0.2737474442f,  -0.1086130217f,
	0.6624777913f,  -0.4027470946f,   0.0611148067f,   0.0333630480f,  -0.0009678024f,  -0.2689219415f,
	0.2098119259f,  -0.0791239142f,   0.0590486228f,  -0.0248315409f,  -0.2408184558f,  -0.1336684972f,
	-0.1418223828f,   0.1171751022f,  -0.0691637620f,  -0.3927105069f,  -0.0244493205f,  -0.3506996334f,
	-0.0231947247f,   0.2564544380f,   0.1192959249f,  -0.0847408623f,  -0.3255444765f,   0.2528690994f,
	0.2341618091f,  -0.0538144372f,  -0.3356615901f,  -0.0955866575f,   0.3202562928f,  -0.3077276945f,
	0.0969109684f,   0.3829368949f,  -0.1807996333f,   0.3156335354f,   0.0637828559f,  -0.1728005707f,
	-0.2871794403f,  -0.0061790645f,  -0.3528221846f,   0.2151335776f,   0.0185435209f,  -0.3728782535f,
	-0.2458607703f,  -0.2604561746f,   0.0882389843f,  -0.2513741255f,  -0.2513316274f,   0.2162546664f,
	0.2348286510f,   0.1533011198f,  -0.0862863064f,  -0.0830714405f,  -0.1002075449f,  -0.0863935053f,
	-0.1813788861f,  -0.2666934729f,  -0.0856910646f,   0.0381315090f,  -0.0729741827f,  -0.3303108513f,
	0.3806333244f,  -0.0165476464f,   0.0053089107f,  -0.0092619117f,  -0.2041901946f,   0.0628694445f,
	-0.2310812324f,   0.2868472338f,   0.4029823840f,   0.1375445724f,  -0.2610274553f,   0.0362206660f,
	-0.8557972312f,   0.1463664919f,  -0.2506435513f,   0.3301969469f,  -0.0672336891f,   0.3226366639f,
	0.3351644576f,  -0.3441230059f,   0.1846054792f,  -0.0831403658f,  -0.3035625815f,  -0.3914589584f,
	-0.0709146112f,  -0.0505185723f,  -0.2349749207f,  -0.2363757640f,   0.1183522120f,  -0.3785958290f,
	-0.3622780442f,  -0.2869210541f,   0.1226664186f,  -0.1113145351f,  -0.0588906072f,  -0.2596203685f,
	0.3026263118f,  -0.0856662020f,   0.2186459005f,  -0.1529249549f,   0.3438065946f,   0.0950867310f,
	-0.1333165616f,   0.3985372782f,  -0.5399976969f,  -0.2519504726f,  -0.2264146656f,   0.0338718928f,
	0.2080990970f,  -0.1842691600f,  -0.5512745380f,   0.3677808940f,  -0.1181148440f,   0.0367661491f,
	0.2192813754f,   0.4090526104f,   0.7271332145f,   0.1203863546f,  -0.1361744702f,  -0.1111956313f,
	-0.1068406403f,   0.0705633461f,   0.4124397933f,   0.2306391001f,   0.1785183698f,   0.0974930376f,
	-0.2900877893f,  -0.4197583795f,   0.1999029368f,   0.1137876064f,   0.5658723116f,  -0.2151592374f,
	0.1815293282f,   0.1514932215f,   0.4136563838f,   0.4152943790f,  -0.2148740292f,   0.0637937784f,
	-0.1890311092f,  -0.2467341423f,   0.3285233974f,  -0.2647923231f,  -0.1766463071f,   0.3714664280f,
	-0.6183883548f,  -0.1549098939f,   0.0489974916f,  -0.2637455165f,   0.3718791306f,  -0.5493901968f,
	0.3687836528f,  -0.2451948375f,  -0.8531569242f,   0.0266724769f,  -0.2470046282f,   0.0902070776f,
	0.2943249941f,  -0.1877799332f,   0.2519456744f,  -0.1771690696f,   0.3135985434f,  -0.0850073397f,
	-0.5728479624f,  -0.3977380395f,  -0.2106409818f,   0.3367029727f,  -0.3668574691f,  -0.1201103926f,
	-0.3720804453f,   0.0791330263f,  -0.1493170857f,  -0.4298231602f,  -0.3728021085f,   0.0002647490f,
	-0.0110163530f,   0.3401021361f,   0.0389791615f,  -0.2347939909f,  -0.0718435869f,  -0.2391306758f,
	0.2653749883f,   0.3763264716f,  -0.2932674587f,   0.2863921523f,   0.1103765815f,   0.0523596890f,
	0.2996665537f,  -0.2301764786f,   0.3132380843f,   0.1413581073f,  -0.3395599425f,  -0.2926677763f,
	-0.4178908765f,  -0.1904308200f,   0.3225474656f,  -0.3017215133f,   0.3065978587f,  -0.2584929168f,
	-0.2733752429f,   0.1547135711f,  -0.5527136922f,  -0.3845800459f,  -0.1517741531f,   0.0402403176f,
	-0.0874858499f,   0.3000353575f,  -0.4253656566f,  -0.1100718081f,  -0.1225713342f,   0.0579233207f,
	-0.1447169781f,  -0.2767715156f,   0.2455359548f,   0.3798224926f,   0.5376195908f,  -0.3014914393f,
	0.0657306910f,  -0.2458129078f,  -0.1370492429f,  -0.0338281132f,   0.3204427361f,   0.1030011177f,
	-0.3443123996f,  -0.2389389277f,  -0.4537007511f,  -0.2660969794f,   0.0170817450f,  -0.3239538968f,
	0.3172853887f,   0.1436879039f,   0.0372870341f,  -0.3274770677f,   0.4910478592f,  -0.0790174976f,
	-0.1878388971f,  -0.2049313784f,   0.4717092216f,   0.3834402263f,   0.2819615304f,   0.0392644517f,
	0.4289875627f,   0.6366680861f,   3.1200327873f,  -0.3715921044f,   1.0784035921f,  -0.0218391176f,
	0.0077692699f,   0.5111114383f,  -0.3225000203f,   0.0683310404f,   0.2670191526f,   0.5553101897f,
	-0.7172573209f,   0.3377775848f,   0.5205212235f,  -0.5484887362f,  -1.0041422844f,  -0.6511246562f
};

const float g_bias_pre_sdx24[SPPHIDLAYER * SPPHIDNODE + OUTDIM] =
{
	-0.0086460542f,   0.0858862251f,  -0.0740100667f,   0.0108117042f,  -0.0865109637f,  -0.0720964074f,
	0.0030747801f,   0.0000000000f,  -0.0297900997f,   0.0000000000f,  -0.0088638877f,  -0.0017966775f,
	0.1962357163f,  -0.0521697886f,  -0.0745888054f,  -0.0220631473f,  -0.1474023014f,   0.0065715853f,
	-0.0079317344f,  -0.0755170137f,  -0.0798933208f,   0.0068105953f,  -0.1426916420f,  -0.0916253254f,
	-0.0151206963f,  -0.0029439800f,   0.0186503772f,  -0.0117798457f,   0.0308753699f,  -0.0668396726f,
	-0.0569886491f,   0.0631860793f,  -0.0755029768f,  -0.0690043196f,   0.0286436621f,  -0.0125424433f,
	-0.0069389129f
};

const float g_fat_min_fix_sdx24[FIXINPUTDIM] = {
	1.00000f,   0.00000f,   0.00000f,   0.00000f,   0.12247f,   0.27481f,   2.50024f,   4.00000f,   4.00000f,
	16.00000f,   2.42857f,   4.00000f,  39.30882f,   3.00000f,   0.00000f,   1.00000f,   0.39966f,   0.00000f,
	0.00000f,   1.19048f,  39.30882f,   0.00000f,   0.35583f,   5.00000f,   5.00000f,   4.00000f
};
const float g_fat_max_fix_sdx24[FIXINPUTDIM] = {
	20.00000f,   1.00000f,   2.48915f,  52.00000f, 421.38606f,   7.12377f, 999.90000f,  30.00000f,  30.00000f,
	33.00000f,  20.00000f,  24.00000f,  49.85000f,  20.00000f,  20.00000f,  20.00000f, 999.90002f,  16.00000f,
	16.00000f,  20.00000f,  49.34375f, 384.06141f,   6.69672f,  35.00000f,  35.00000f,  28.00000f
};
const float g_fat_min_float_sdx24[FLTINPUTDIM] = {
	1.00000f,   0.00000f,   0.00000f,   0.00000f,   0.00000f,   0.44214f,   1.00000f,   2.00000f,   5.00000f,
	13.00000f,   0.00000f,   4.00000f,  34.20000f,   1.00000f,   0.00000f,   0.00000f,   0.82983f,   0.00000f,
	0.00000f
};
const float g_fat_max_float_sdx24[FLTINPUTDIM] = {
	20.00000f,   1.00000f,   1.58563f,  50.00000f, 213.33518f,   6.67887f,  10.87457f,  35.00000f,  35.00000f,
	33.00000f,  18.88889f,  27.00000f,  49.35000f,  20.00000f,  20.00000f,  19.00000f, 999.90002f,  16.00000f,
	16.00000f
};
const float g_fat_min_pre_sdx24[PREINPUTDIM] = {
	0.41899f,   0.00000f,   6.00000f,   0.10000f,   3.00035f,   0.00020f,   4.00000f,   5.00000f,   4.00000f,
	4.00000f,   0.27481f,   0.34103f
};
const float g_fat_max_pre_sdx24[PREINPUTDIM] = {
	8.67431f,  20.00000f,  28.00000f,  44.20000f, 841.98852f,   0.09799f,  23.00000f,  36.00000f,  30.00000f,
	23.00000f,   7.57092f, 421.38606f
};

const float g_coes_fix_l15[FIXINPUTDIM * FIXHIDNODE + (FIXHIDLAYER - 1) * FIXHIDNODE * FIXHIDNODE + FIXHIDNODE * OUTDIM] = {
	0.2601391971f,   0.3562436104f,  -0.3411603570f,   0.0508148521f,   0.1766659170f,   0.0381382480f,
	-0.1446473747f,  -0.2334373742f,   0.0028387180f,   0.2893600166f,   0.0501210913f,  -0.1244815513f,
	-0.0014771399f,   0.2810533047f,  -0.1236268878f,   0.1460003406f,  -0.0261763074f,  -0.1646027863f,
	-0.0880346894f,   0.3180026114f,  -0.3395629823f,  -0.0139231579f,  -0.2179546654f,  -0.3361641467f,
	0.2678969204f,  -0.2099663317f,  -0.0117677748f,  -0.2674887776f,  -0.2887000144f,  -0.0599287152f,
	0.3521077931f,  -0.1081667840f,  -0.0961124301f,   0.0015477836f,  -0.1166392267f,  -0.1132518947f,
	-0.1940144002f,  -0.2683996856f,  -0.3649375141f,  -0.2144644111f,  -0.2447532117f,  -0.1045101285f,
	0.1833133399f,  -0.0434305370f,   0.0938442945f,  -0.0048188865f,  -0.1625550985f,  -0.2937163711f,
	0.0228949487f,  -0.0376758575f,   0.0923328698f,  -0.0691383183f,   0.3289196193f,   0.2049915344f,
	-0.3486180604f,  -0.3417813778f,  -0.3370243311f,   0.0234301053f,  -0.3281509578f,   0.0296502374f,
	0.2342088670f,  -0.2051128447f,  -0.2722417712f,   0.1627226472f,  -0.2569181919f,  -0.0589687042f,
	0.1337819099f,   0.2751132250f,  -0.3528698981f,   0.1156993359f,   0.3259342611f,  -0.1951545924f,
	0.0178787988f,  -0.1095967591f,   0.1338151693f,   0.3841491342f,  -0.0346399397f,  -0.1939659566f,
	-0.1911914349f,  -0.1213105023f,   0.3548026085f,   0.1938693374f,   0.2111849487f,   0.3005957007f,
	0.2835680842f,  -0.4717323482f,   0.1115249842f,   0.1064437255f,   0.1048752442f,  -0.1314754337f,
	-0.1712907106f,   0.0578415990f,   0.2464255393f,   0.0392359421f,  -0.1818062514f,   0.0893418193f,
	-0.0163746551f,   0.1225465015f,   0.1367625743f,   0.2941930592f,   0.4938475192f,  -0.1032546386f,
	-0.1752609760f,  -0.3251200616f,   0.3071522713f,  -0.2155300677f,  -0.2155594677f,  -0.3330238163f,
	0.2244136781f,  -0.3035011292f,  -0.0427970886f,   0.1532627642f,   0.0682140291f,   0.3123987615f,
	0.2938479483f,  -0.3198340535f,  -0.0225441456f,   0.2009265423f,  -0.3268668354f,   0.2191892862f,
	0.2324031144f,  -0.1843850315f,   0.0707342997f,   0.0537948050f,  -0.3573870659f,  -0.2045553178f,
	-0.0506358445f,  -0.2546353638f,   0.0582553260f,   0.0190126467f,   0.2925175130f,   0.2592870295f,
	-0.0735162348f,  -0.3670943975f,   0.0747257397f,  -0.3522140980f,   0.2945003808f,  -0.2295322716f,
	0.3125918210f,  -0.1838762760f,  -0.2302808762f,   0.0392339341f,  -0.0518725663f,  -0.3811800480f,
	0.2737064958f,  -0.2425158918f,   0.1541941613f,  -0.3171389103f,   0.1524582058f,  -0.3725718856f,
	-0.1556053907f,   0.1818007082f,  -0.0775616542f,  -0.0926516205f,  -0.2000531554f,  -0.0739980638f,
	0.2092944831f,   0.2771157622f,  -0.1827794909f,  -0.0998901501f,  -0.1332453936f,   0.2596272230f,
	0.0021474911f,  -0.2568570673f,  -0.1488801837f,   0.0317647271f,  -0.3846876919f,   0.2145601958f,
	0.0945070386f,   0.3285500407f,   0.3375195563f,  -0.0080968225f,  -0.3139849305f,  -0.4006675184f,
	-0.3694130778f,   0.0955971554f,   0.1412387341f,  -0.2115718275f,   0.0876043960f,   0.1201945916f,
	-0.3337993026f,  -0.3097905517f,  -0.2212800533f,   0.0205094926f,   0.2845414579f,   0.0820330307f,
	0.0717293024f,  -0.2359460443f,   0.0220714044f,   0.3850640059f,   0.1898312569f,  -0.0699998289f,
	0.2362507284f,  -0.0042529027f,   0.0148792136f,  -0.0107097756f,   0.2273153365f,  -0.1059935242f,
	-0.3374681771f,   0.1235529259f,   0.0526470952f,   0.1365060061f,   0.3569027781f,  -0.3713899255f,
	-0.4585298598f,   0.2673034072f,   0.3743071258f,   0.1497723907f,   0.0243610963f,   0.1590210795f,
	-0.2533860207f,   0.3782128096f,  -0.0386148505f,   0.1871747673f,  -0.3140845895f,   0.3660396338f,
	0.0993203297f,   0.3371228576f,   0.1259598136f,   0.4506893158f,  -0.3900832832f,   0.2171767354f,
	0.1062077135f,  -0.3176655471f,   0.1068646833f,   0.1439263821f,   0.4093529582f,   0.2791227400f,
	-0.1808834076f,   0.2224307358f,   0.2720054090f,  -0.1079977602f,   0.0074208523f,  -0.2686985433f,
	0.2946471572f,  -0.2975797355f,   0.2597136199f,   0.0308390874f,  -0.1551574022f,  -0.3419099450f,
	-0.3480578959f,   0.1930759251f,   0.2002989054f,   0.1178204045f,  -0.2933139503f,   0.1320872009f,
	0.1709305346f,   0.0769519508f,   0.1720848233f,  -0.2212865204f,  -0.3442766368f,  -0.1326075941f,
	-0.1096663699f,  -0.3020928204f,  -0.1146344393f,  -0.2452666461f,  -0.1406640857f,   0.3899261653f,
	0.3714144528f,  -0.2478075325f,   0.2428065538f,   0.3317401409f,   0.2454793900f,  -0.3093252778f,
	0.3635050356f,  -0.1037105769f,  -0.1538945884f,  -0.1741950363f,   0.2951547801f,   0.3864786923f,
	-0.4375168979f,   0.1963875741f,   0.4369611144f,   0.0748105794f,   0.1867791414f,  -0.0583962128f,
	-0.3325540721f,  -0.0788928494f,  -0.0219976697f,  -0.0931847990f,  -0.1870456189f,   0.2449083626f,
	-0.1689256281f,   0.4453327358f,   0.4142807424f,  -0.2582081854f,   0.0753000304f,  -0.0365689956f,
	-0.0666936040f,   0.1620666683f,  -0.0444542840f,   0.0761322305f,   0.1219211593f,   0.1734218448f,
	0.3194069564f,   0.0029435309f,   0.2055564523f,   0.0373274125f,   0.1036703885f,  -0.2271523029f,
	-0.1413148046f,  -0.2555660605f,   0.0559106134f,  -0.1078240424f,   0.1120125279f,   0.0694012567f,
	-0.0512726270f,  -0.3207625151f,  -0.3232386708f,  -0.2007962167f,   0.2943816185f,  -0.3222469985f,
	-0.0869932696f,   0.3518275917f,  -0.0631829649f,  -0.3594929576f,   0.3988913596f,   0.2700991631f,
	-0.1671598852f,   0.1862169951f,   0.0578988716f,  -0.2582302988f,   0.4147724509f,   0.3065054417f,
	0.0268830955f,  -0.2917102873f,  -0.2801232636f,  -0.1205281541f,   0.3245953918f,  -0.2632640600f,
	0.0244341418f,  -0.2220538706f,   0.0452050380f,   0.4186016917f,   0.2335307002f,  -0.0897263139f,
	0.1690345556f,   0.0840055048f,  -0.2789992690f,  -0.3243146241f,   0.3202646971f,  -0.2626045942f,
	-0.2794914246f,   0.0730901733f,   0.0522713289f,   0.2104838043f,  -0.1401409358f,   0.3197199106f,
	-0.3044385910f,  -0.3264856339f,  -0.2903390825f,   0.1296790391f,   0.0187580660f,   0.2148012072f,
	0.1950621158f,  -0.0495124608f,  -0.3900579512f,   0.1840383261f,  -0.3421033621f,   0.3146687746f,
	0.3314331472f,   0.0807659104f,   0.1112518162f,  -0.3245566189f,   0.3706053197f,   0.2683833241f,
	-0.1530622244f,   0.2534302771f,  -0.3001826704f,  -0.3412051201f,   0.0255161412f,   0.3035450280f,
	0.2834372222f,   0.3444607854f,  -0.1979920566f,  -0.2975626588f,  -0.1580923200f,  -0.2657437623f,
	-0.2096612155f,   0.4976043999f,   0.3089002669f,   0.3091546297f,   0.3837840259f,  -0.1557205766f,
	0.4887182713f,  -0.0216285381f,  -0.0637893677f,   0.3467221558f,   0.3289854825f,  -0.3286294341f,
	-0.3057879806f,   0.1512893736f,  -0.2791404128f,  -0.1233893558f,  -0.2113131434f,   0.2856390774f,
	-0.2385446131f,  -0.1392824650f,   0.2562691271f,   0.0269416329f,   0.2947614491f,   0.2579152286f,
	-0.3156854510f,   0.3220671415f,  -0.2571466267f,  -0.0259216577f,   0.1530350745f,   0.1611206084f,
	-0.2184383273f,   0.3338334560f,  -0.0911998153f,  -0.2311690450f,   0.2504360974f,  -0.4703193307f,
	0.2588650882f,  -0.2176198214f,   0.1161875650f,   0.4624470770f,   0.3571782410f,   0.0430402607f,
	0.3883242607f,  -0.5022427440f,   0.6707268953f,   0.2725621462f,  -0.0081856782f,   0.3395604193f,
	0.1010937169f,  -0.2090149373f,   0.1707819849f,   0.0463858359f,  -0.2691577673f,   0.8309814334f,
	-0.0807826519f,  -0.0289487541f,   0.1308131814f,   0.1343358904f,   0.2253936529f,   0.3573352098f,
	0.0140836118f,   0.2368097007f,   0.0471527427f,  -0.1519029438f,  -0.0588573217f,  -0.0635310411f,
	-0.3500626683f,   0.0078960359f,  -0.3541917503f,  -0.0341903567f,  -0.0807448030f,   0.2975251377f,
	-0.2734962404f,  -0.0584461689f,  -0.3679246008f,  -0.0418457091f,   0.0774888396f,  -0.1025407314f,
	-0.3193995357f,   0.1028801203f,  -0.1897091568f,   0.1205090284f,  -0.0709356070f,  -0.3420551717f,
	0.0133085847f,  -0.0962747931f,  -0.2006898224f,  -0.2315691113f,  -0.1953293085f,  -0.0024047792f,
	0.3592385948f,  -0.1182762682f,   0.0646359548f,  -0.3482322395f,  -0.2333772629f,   0.3246766329f,
	0.0376209505f,  -0.2719111741f,   0.1136908755f,   0.3038720191f,   0.0620101131f,   0.2422703803f,
	0.0290246718f,   0.1753039360f,   0.1465863436f,   0.0104982955f,   0.5908188224f,   0.1089705229f,
	-0.3857163489f,  -0.3799165189f,   0.2970002890f,  -0.3224972188f,   0.2217998803f,   0.1480788291f,
	0.0533796549f,   0.2640332580f,  -0.0216756817f,  -0.1477094740f,   0.2874113917f,   0.0241411012f,
	-0.2491664588f,   0.1571125835f,  -0.0269900113f,   0.1154236272f,   0.4389036000f,   0.0447479486f,
	0.3692152202f,   0.2610175014f,   0.3795744181f,  -0.2924632728f,  -0.3586186469f,  -0.4031278193f,
	0.2396291345f,  -0.0147693306f,  -0.3484524488f,   0.0163629577f,  -0.2412958443f,  -0.2391097099f,
	-0.1609789878f,   0.1150409505f,  -0.1965705901f,   0.0224091522f,  -0.1317508966f,   0.1475554109f,
	0.0431592613f,   0.3183834553f,  -0.2562265098f,  -0.1808804721f,   0.3023014665f,  -0.2576146722f,
	0.0974597037f,   0.0224289224f,   0.1545567513f,  -0.1214077473f,   0.4285363257f,  -0.0615426451f,
	-0.2878328562f,  -0.0413790196f,  -0.3751851618f,   0.0593735315f,   0.1630761921f,   0.3836820722f,
	-0.2275181562f,  -0.3909310400f,   0.2392394990f,  -0.1451110393f,   0.1371615678f,   0.2810737491f,
	0.3023534417f,   0.2149937302f,   0.2047307491f,  -0.2884068787f,   0.1999837309f,   0.1629517674f,
	0.2017783523f,  -0.2985543013f,  -0.2190958411f,   0.3337245584f,   0.0295726415f,   0.1329643726f,
	-0.1607949585f,  -0.2820211053f,   0.2051011771f,  -0.0098724747f,   0.0219465308f,   0.2310538590f,
	-0.3287234008f,  -0.2472275496f,   0.4630072415f,  -0.1938500255f,   0.3166874051f,   0.1587756425f,
	-0.4115398228f,   0.3610270917f,   0.3127695620f,  -0.3796527982f,  -0.3818861842f,  -0.3573794365f,
	0.2459718138f,   0.2172338963f,   0.2142157257f,   0.1729197800f,   0.3642757535f,   0.2752135396f,
	0.1780633926f,   0.0446526147f,  -0.2112852484f,  -0.0071435468f,   0.3954149187f,  -0.3487479389f,
	0.0474713035f,  -0.2927545309f,   0.2023773342f,  -0.0517323203f,   0.4033177197f,   0.3052704334f,
	0.2623809278f,  -0.1642524600f,   0.3979758620f,  -0.5973131061f,  -0.1095358953f,   0.0780028626f,
	0.0897848159f,   0.2612147629f,  -0.5112067461f,  -0.0821256191f,   0.2752760947f,   0.0426863246f,
	-0.2131521255f,  -0.0771051645f,   0.2917575836f,   0.0517660789f,   0.2342146188f,   0.3230277300f,
	0.3386938274f,  -0.2340015024f,   0.1080961004f,   0.2007290125f,   0.3376493752f,   0.2696954310f,
	-0.0374719240f,  -0.2122188807f,  -0.2177087963f,   0.1523666978f,  -0.0010237766f,   0.2825472057f,
	0.2719251812f,   0.1361234635f,  -0.1611338407f,   0.1930422038f,  -0.3025660813f,   0.0508831739f,
	-0.3638371825f,  -0.2744211853f,   0.1183098406f,  -0.2418365926f,  -0.2436858863f,  -0.3472725153f,
	0.1176628694f,  -0.1741403788f,   0.2861230373f,  -0.1874583960f,   0.3710698187f,   0.2953091860f,
	-0.0855853111f,  -0.3959853351f,  -0.2654400468f,   0.2949780226f,   0.0985257402f,  -0.3551934063f,
	0.3773576617f,   0.1391968131f,  -0.1225991845f,   0.2966653705f,   0.2732126415f,  -0.3682910502f,
	-0.1943253279f,   0.1875231266f,  -0.2808649838f,   0.1701725572f,  -0.3553916812f,  -0.2494824678f,
	-0.0626822785f,   0.3996607065f,   0.2364929020f,  -0.3274952173f,  -0.0617412627f,   0.2080708742f,
	-0.0212880764f,   0.1572171450f,   0.1014705002f,   0.1696409881f,   0.1113272384f,  -0.3280390799f,
	-0.3302656710f,  -0.1933533847f,  -0.2048379928f,  -0.0724435151f,   0.0739408657f,   0.2470539212f,
	-0.3960407376f,   0.2302154303f,  -0.2089740485f,  -0.0528845340f,   0.0607855022f,   0.2058236003f,
	0.1529521942f,   0.2911967039f,  -0.1938419491f,   0.2005729675f,  -0.2656356692f,  -0.1671301425f,
	0.3908012807f,   0.1554610729f,  -0.0540695675f,  -0.3442724943f,   0.2559827268f,   0.4163591564f,
	-0.3226959407f,  -0.2225984186f,   0.2967586517f,   0.4394799471f,  -0.2405111045f,   0.2563707829f,
	0.0178937651f,   0.3257223964f,  -0.0221022516f,   0.3866990805f,   0.3454321623f,   0.3169055879f,
	0.1731439233f,   0.0778532401f,  -0.2834987342f,  -0.2939144075f,  -0.0823511705f,   0.3490648866f,
	0.0900027081f,   0.3401826322f,   0.0031845614f,   0.2741655707f,  -0.2818766832f,   0.0689513981f,
	-0.0930737704f,   0.1676083207f,  -0.0051750094f,  -0.2678513229f,   0.0490478650f,   0.3733544350f,
	-0.1494930387f,  -0.0045244340f,  -0.1211829484f,  -0.0193931852f,   0.4515059292f,  -0.0614277832f,
	0.3280318379f,  -0.1191584468f,   0.4586590230f,  -0.5128650665f,   0.3885596395f,  -0.3470593989f,
	-0.3974616528f,  -0.1069373488f,  -0.1381637901f,  -0.1307424456f,  -0.0094921924f,   0.1538913548f,
	0.0665746257f,   0.1532934904f,   0.1839223504f,   0.3687770665f,   0.1747400612f,  -0.2721176744f,
	0.1378183812f,  -0.1214688346f,   0.1143324897f,  -0.0107622044f,   0.3258430958f,  -0.0545848906f,
	-0.2699468136f,   0.1888716221f,   0.3643422723f,   0.0826600865f,  -0.3661690652f,   0.2441990376f,
	-0.1186546832f,  -0.1030340493f,  -0.3594849408f,   0.1974555999f,   0.2153645903f,   0.3306140900f,
	-0.4027213752f,   0.3792179227f,  -0.2846367657f,  -0.1026902571f,  -0.5627552271f,   0.2059091330f,
	-0.1849700361f,  -0.0575782061f,   0.3716310263f,   0.4194474518f,   0.1045295820f,   0.0838553160f,
	0.1439446956f,  -0.0405447669f,   0.1330315471f,   0.3025417030f,  -0.2788017094f,  -0.3227889240f,
	0.2531950474f,  -0.2234564424f,  -0.0616495125f,   0.2581075430f,   0.1758421957f,   0.2186922431f,
	-0.0477150008f,  -0.0554486662f,  -0.4944879413f,   0.4309394956f,  -0.1088832989f,  -0.0038663440f,
	-0.4296994805f,   0.1570190787f,  -0.3637845516f,  -0.0951740891f,   0.0946214944f,  -0.5488541722f,
	0.1626173109f,  -0.5000000000f,   0.3731412590f,  -0.2166089863f,  -0.2380901724f,   0.5287922025f
};
const float g_bias_fix_l15[FIXHIDLAYER * FIXHIDNODE + OUTDIM] = {
	-0.0419923663f,   0.0000000000f,  -0.0400867313f,   0.0154653089f,   0.0027206270f,  -0.0155395670f,
	-0.0350109711f,   0.0569600724f,   0.0756591633f,   0.0034319558f,  -0.0839359537f,  -0.0281769130f,
	-0.0196487904f,  -0.0345079750f,   0.0174374003f,   0.0479367860f,   0.1203558892f,   0.0000000000f,
	0.0312830582f,  -0.0250871275f,  -0.0331591181f,   0.0231899470f,  -0.0076358882f,   0.0118807936f,
	-0.0098851668f,  -0.0880273581f,  -0.0259647425f,  -0.0094276201f,  -0.0381252207f,  -0.0097153690f,
	0.0542087592f,  -0.0484945327f,  -0.0869798809f,   0.0682174489f,  -0.0318386704f,   0.0442588516f,
	0.0270376280f
};

const float g_coes_pre_l15[PREINPUTDIM * PREHIDNODE + (PREHIDLAYER - 1) * PREHIDNODE * PREHIDNODE + PREHIDNODE * OUTDIM] = {
	0.2638852596f,   0.3209196627f,  -0.1454155594f,  -0.0906780288f,  -0.0959926769f,   0.2853934467f,
	0.0287996233f,   0.2572711706f,  -0.3499711752f,   0.1343899816f,   0.1936978251f,  -0.2466138601f,
	-0.0282022655f,  -0.2665174007f,  -0.1687684655f,  -0.3481220007f,   0.1115944982f,  -0.1790325046f,
	-0.2953298092f,   0.1249927878f,  -0.3495740294f,  -0.3656346798f,   0.0043945014f,  -0.0953549445f,
	-0.5321292281f,  -0.3248562217f,   0.1383494586f,   0.0411604643f,   0.1831198186f,  -0.1653259546f,
	-0.0018034524f,   0.0385143384f,   0.1932591051f,   0.1737299412f,  -0.3401225805f,  -1.9215308428f,
	0.0986597016f,  -0.2056872100f,  -0.3988171518f,  -0.5432815552f,   0.4630042911f,   0.2511570156f,
	0.2787691355f,   0.5128639936f,  -0.4509839416f,  -0.1651159674f,  -0.0546809062f,  -0.4082295895f,
	0.3022267222f,   0.2443952113f,  -0.1155261770f,   0.2830688059f,  -0.2425852418f,  -0.4044903517f,
	0.3612568080f,   0.1203753576f,   0.3291732371f,  -0.3104601502f,   0.1347601414f,   0.0092740897f,
	0.5597239137f,   0.1595139503f,   0.4181361794f,  -0.5497105122f,   0.0219157711f,   0.3571155667f,
	-0.1284957975f,  -0.2182667553f,   0.0923063457f,  -0.5469195247f,   0.1360156536f,  -0.0527536310f,
	-0.4830456972f,  -0.0383512639f,  -0.0111027276f,  -0.6767588854f,   0.3690485656f,   0.4275023639f,
	-0.5457561016f,  -0.2802618146f,  -0.4407229424f,   0.1768007874f,   0.2121869028f,  -0.6954874992f,
	0.0098415585f,  -0.0565627143f,   0.0801440775f,   0.2114304751f,   0.5089999437f,   0.5107467175f,
	-0.4802395999f,  -0.3741932511f,   0.3702725768f,  -0.2664737999f,  -0.7294067144f,   0.5758250952f,
	0.3090890646f,   0.1997827142f,  -0.1334312111f,   0.2131316215f,   0.1909756809f,   0.5415092707f,
	0.1207805648f,   0.1448649168f,  -0.3805233836f,   0.1358635575f,   0.0748631582f,  -0.1887024790f,
	-0.0331786908f,   0.1814471036f,   0.1707646102f,  -0.1535298824f,  -0.5626663566f,  -0.0039837812f,
	0.2300318629f,   0.3304115534f,   0.2167417407f,   0.4985815585f,   0.1473587155f,  -0.2397591323f,
	-0.1617104709f,  -0.4075111747f,  -0.3964957297f,   0.0030311048f,  -0.2138451487f,  -0.0289308429f,
	-0.0646840930f,  -0.1298483312f,  -0.1726722717f,  -0.4073977172f,  -0.1095193923f,  -0.1383703649f,
	0.1582711339f,  -0.2449786216f,  -0.4469472468f,   0.3402642608f,   0.0683095455f,  -0.2560985684f,
	-0.3559453487f,   0.1561538577f,  -0.3715413511f,   0.3924972415f,   0.0024209917f,  -0.3223116398f,
	0.4340232909f,  -0.1094035283f,   0.0144969933f,   0.4977104962f,   0.0836295038f,  -0.0870838612f,
	0.3301720917f,   0.5432731509f,  -0.1916706115f,  -0.1137359291f,  -0.2623897493f,   0.1143168211f,
	0.2116586268f,  -0.0240214244f,   0.3733881712f,  -0.0617306568f,  -0.6488381624f,  -0.1406043619f,
	-0.4149103463f,   0.3613618612f,  -0.1792684197f,  -0.1987698972f,   0.0682995319f,  -0.1576154232f,
	0.0336848907f,  -0.3455555439f,  -0.0540779382f,  -1.2753453255f,   0.4596290588f,   0.1756012738f,
	0.3097766936f,   0.5960364342f,  -0.6598585844f,  -0.2362237573f,  -0.2011349350f,   0.1176787242f,
	-0.0414300859f,   0.0617472194f,  -0.2936197221f,   0.2767826617f,  -0.3251611590f,   0.1592032611f,
	0.3864349127f,   0.2328424007f,   0.1009345725f,  -0.6459423900f,   0.0772245675f,  -0.0158705376f,
	-0.0531648546f,   0.2004154921f,   0.0704121217f,   0.2828880548f,   0.3174991012f,  -0.1720412523f,
	0.1794822067f,  -0.1428116709f,  -0.3065205812f,   0.2149185687f,   0.4292582572f,   0.2239249647f,
	0.0039267316f,   0.0218939967f,  -0.1773891896f,  -0.6496818662f,  -0.1160910279f,  -0.2337812036f,
	0.3385755420f,   0.2366274595f,   0.5059536099f,   0.3835993409f,   0.5019068718f,  -0.0733455792f,
	0.0696458668f,  -0.0571555793f,   0.4414132237f,   0.5942568779f,   0.0785468668f,   0.4716667235f,
	0.0639133602f,  -0.0925861523f,   0.3646000028f,   0.1992128044f,   0.1153924465f,   0.3184612393f,
	0.0460911207f,   0.2637970746f,  -0.0610573404f,   0.1550460905f,  -0.0471479408f,   0.0759021491f,
	0.0856766775f,  -0.3153160512f,   0.2864088416f,   0.5950604677f,   0.3388126194f,  -0.2895836830f,
	0.6539332867f,  -0.2341003716f,   0.1211720631f,  -0.0644966140f,  -0.2445809245f,  -0.1555880904f,
	0.3526721597f,   0.2106389701f,  -0.5608369708f,  -0.3267214000f,   0.4316490591f,   0.2195512056f,
	-0.0503054075f,  -0.2886069417f,   0.0747312158f,   0.1083875000f,   0.0596205033f,  -0.1884949058f,
	-0.5219639540f,  -0.1243061870f,   0.2895130813f,   0.2908783555f,  -0.2168305218f,   0.2728096247f,
	0.1155904010f,   0.4206368923f,  -0.1651730090f,   0.1588330269f,   0.2997750342f,  -0.1056639850f,
	0.1678331494f,   0.3328030109f,   0.4347124398f,   0.5693764091f,   0.2770518959f,   0.0707483664f,
	0.2306695431f,   0.0883105844f,   0.4331327677f,   0.2124764621f,  -0.1587339044f,   0.3634968400f,
	-0.1135881096f,  -0.0585924648f,  -0.1751395911f,   0.1245421916f,  -0.1132462323f,  -0.0374545865f,
	-0.2341987193f,   0.2719263434f,  -0.3538888395f,   0.1195138693f,   0.0209967922f,   0.1867074519f,
	-0.2791795731f,   0.2281513959f,  -1.1094276905f,  -0.2243213058f,   0.1159878373f,  -0.2955306768f,
	0.0877114385f,  -0.4441120028f,  -0.6168822646f,  -0.1652552634f,  -0.3120912015f,   0.1742270589f,
	-0.2380018979f,  -0.0286926925f,   0.6038174629f,  -0.6628606319f,  -0.2449550331f,   0.0787074417f,
	0.1182359010f,  -0.5230161548f,  -0.4064348936f,   0.1030056700f,   0.3391119838f,   0.1470814943f,
	0.3662364483f,  -0.1905418187f,   1.0472550392f,  -0.0002822032f,   0.0743329450f,   0.0822227821f,
	0.1423188150f,   0.1726449728f,  -0.1575488448f,  -0.0270608980f,   0.4184881747f,  -0.1503024548f,
	0.8056967854f,  -0.1559735984f,   0.2474676520f,  -0.4231637716f,  -0.3432956934f,   0.1320382953f,
	0.2679144144f,   0.2013217360f,   0.3779917657f,  -0.3736350238f,  -0.2004271895f,  -0.1702632606f,
	0.2579496205f,   0.2550352812f,  -0.0417273268f,   0.4101961255f,   0.1349542737f,  -0.2289734036f,
	-0.2639082968f,  -0.1248125210f,  -0.2862238586f,  -0.0312264897f,   0.0337779224f,  -0.1537667513f,
	-0.1868969053f,   0.2024643868f,  -0.3806180656f,  -0.1351127028f,   0.4047051072f,  -0.1352136135f,
	-0.2742924392f,   0.1420748830f,  -0.1914795190f,  -0.4310052693f,   0.3940583169f,   0.0879467800f,
	-0.2941707373f,  -0.4685314298f,   0.2678699493f,   0.3379023373f,   0.1403343678f,   0.2305906415f,
	0.1972734779f,   0.1010418013f,   0.3847007155f,   0.3415822089f,  -0.3065572679f,   0.2769865990f,
	0.1949549317f,  -0.4052773714f,  -0.0941422060f,   0.3890753984f,   0.1240468547f,   0.1440691650f,
	-0.8283219934f,  -0.1966024339f,   0.0422706120f,  -0.4109232426f,  -0.0909371078f,   0.2741739750f,
	0.3300950527f,   0.0922087580f,  -0.2208413333f,   1.1998476982f,  -0.1411453784f,  -0.2236039937f,
	-0.2690475583f,   0.1143143773f,  -0.3144766688f,   0.6886297464f,  -0.1957889497f,   0.0062151924f,
	-0.6621081233f,   0.2214626968f,  -0.0663156435f,  -0.0335460231f,  -0.3213927150f,  -0.0171025395f,
	0.1032811627f,   0.2163131386f,   0.3823476732f,  -0.0442842916f,  -0.0812067837f,   0.3768183589f,
	0.2497520149f,   0.0950409770f,  -0.2095639557f,   0.0441685207f,   0.3163683116f,  -0.1005302891f,
	0.0434428602f,   0.3636907935f,   0.3395009339f,  -0.1426685452f,   0.4064046741f,   0.1993319988f,
	-0.1471848786f,   0.3361479938f,   0.1833749712f,  -0.1957698911f,   0.3398986757f,  -0.3675002456f,
	0.2550756335f,  -0.2388556451f,   0.1556738317f,   0.7939638495f,   0.1730569154f,  -0.1520099044f,
	-0.4085161388f,   0.3588153720f,   0.3049063087f,  -0.3588852286f,  -0.0546273291f,  -0.1462330222f,
	-0.3535447717f,   0.1378734708f,  -1.3868917227f,   0.4388558865f,   0.2503487170f,   0.3812337518f,
	0.2078485638f,   0.1824480891f,  -0.0806391388f,  -0.2112447917f,  -0.3145321012f,  -0.0845320597f,
	0.0624592714f,  -0.2993836999f,  -0.2197452486f,   0.2460345477f,  -0.0117225051f,  -0.3138340414f,
	-0.3038635552f,  -0.4107569456f,  -0.4119315743f,   0.4236257970f,   0.1111540124f,  -0.2450301647f,
	0.1416164339f,  -0.3687311113f,  -0.1447648406f,  -0.5906272531f,  -0.4683127105f,  -0.2197714299f,
	0.7542210817f,  -0.3134914637f,  -0.3832431436f,   0.0293743219f,   0.0456622839f,  -0.1658601165f,
	0.6532267332f,   0.2806107700f,   0.7403696179f,  -1.2021553516f,   0.0247201901f,  -0.1735140234f,
	0.3209311366f,   0.4067744017f,  -0.2432834208f,  -0.2676216662f,  -0.1065742001f,   0.3208543956f,
	0.4424534738f,  -0.3365147710f,   0.3207849264f,   0.3381249905f,  -0.2098527402f,  -0.3619815707f,
	0.0166340806f,  -0.1851192564f,   0.1346381605f,   0.2492230386f,  -0.3724515140f,   0.4054396749f,
	-0.1953895688f,   0.2271376848f,  -0.4032771289f,  -0.4895678461f,   0.0265283491f,  -0.5245774388f,
	-0.1483970135f,   0.2860045731f,   0.0106249116f,   0.2179212272f,  -0.3798886836f,   0.2639286518f,
	-0.1887242645f,   0.3404673636f,   0.5079720020f,  -0.7210862041f,   0.0884797126f,  -0.0074912864f,
	0.0238191225f,   0.0030887127f,  -0.0155032435f,  -0.0957719386f,  -0.2374995202f,  -0.3293793201f,
	0.1313853264f,  -0.2910873890f,  -0.1862669140f,   0.3006114364f,   0.1009601355f,   0.1805806160f,
	-0.1418904513f,   0.2001420110f,   0.0499216206f,   0.3460730016f,  -0.1995180994f,   0.3014250696f,
	-0.2273443192f,  -0.5661572814f,   0.5075139999f,  -0.2652564049f,  -1.3497534990f,   0.4385529160f,
	0.8442090750f,  -0.5121532083f,   0.3405544460f,  -0.7911853790f,  -0.3998084068f,   0.1334299892f,
	0.5796126723f,  -0.2216840982f,   1.2817982435f,   0.0731181055f,   0.5282289386f,  -0.4432906210f
};
const float g_bias_pre_l15[PREHIDLAYER * PREHIDNODE + OUTDIM] = {
	0.0238521285f,   0.0000000000f,   0.0078781331f,  -0.0053097578f,   0.1337392330f,  -0.0453265458f,
	-0.0148213245f,   0.0085459743f,   0.0210457705f,   0.0006059109f,   0.0000000000f,   0.0000000000f,
	0.0957877785f,   0.1490223110f,   0.1365178078f,   0.0762312263f,   0.1115103066f,  -0.1400680393f,
	0.0004698961f,  -0.0116001014f,   0.0025869808f,   0.0036415851f,   0.1610793471f,   0.0005721190f,
	-0.0023056148f,   0.0512484908f,   0.0204882436f,  -0.0109498156f,  -0.0988524631f,   0.0975178257f,
	0.0677078962f,  -0.0580070093f,  -0.1087464318f,   0.0183128472f,   0.0221403092f,   0.0384043753f,
	-0.0039077858f
};

const float g_coes_float_l15[FLTINPUTDIM * FLTHIDNODE + (FLTHIDLAYER - 1) * FLTHIDNODE * FLTHIDNODE + FLTHIDNODE * OUTDIM] = {
	0.5741386414f,  -0.4628369212f,  -0.0743087307f,  -0.1527353525f,  -0.3599128723f,  -0.2267240435f,
	0.3218711913f,  -0.0151147498f,  -0.0265913215f,   0.2666974366f,  -0.0380152501f,  -0.2762923241f,
	-0.1133079678f,  -0.1918700784f,   0.2182989717f,   0.3658026159f,  -0.1196637079f,   0.3042740226f,
	-0.2244993448f,  -0.0119523061f,  -0.1596347988f,   0.2014711648f,  -0.0590489842f,   0.1053859144f,
	0.1794223636f,  -1.3285566568f,  -0.2119708806f,  -0.2749497592f,   0.1345881373f,  -1.1439281702f,
	0.4758934975f,  -0.0883579552f,   0.3325074017f,  -0.6103218198f,   0.0003883588f,   0.1318728179f,
	0.1989263892f,   0.1581652164f,  -0.1110829189f,  -0.0311609507f,  -0.0845587030f,  -0.0764914975f,
	-0.0264287423f,  -0.3485986292f,  -0.0982491896f,  -0.2313174456f,  -0.4067063332f,   0.2231114805f,
	0.1297280192f,   0.1994917393f,  -0.1283939779f,  -0.2917540669f,   0.1131967679f,  -0.7487993240f,
	-0.1040602401f,   0.1444277614f,  -0.2043468505f,   0.0107777864f,   0.2070824504f,   0.3999111056f,
	-0.1865715384f,   0.1925756931f,   0.1445982903f,  -1.9661604166f,   0.6391254067f,   0.4028865993f,
	-0.0037192281f,   0.0322871320f,  -0.1951946318f,   0.2580455542f,  -0.1815134585f,  -0.2494965196f,
	0.0989424661f,   0.0129828360f,  -0.4423469603f,  -0.3174152076f,  -0.0044716625f,  -0.0862380788f,
	-0.1531857252f,   0.3842244148f,   0.2132613510f,   0.3297359049f,  -0.0820454955f,   0.1483121663f,
	0.2254054993f,   0.0966936201f,   0.2639546096f,  -0.2293051928f,   0.3674739003f,  -0.2105798125f,
	-0.0879784748f,   0.2481214404f,  -0.0853027180f,  -0.3502016366f,   0.3385440409f,   0.3815702200f,
	0.2057745457f,   0.2328799814f,  -0.1487303972f,   0.1444982141f,  -0.7795231938f,  -0.4425618947f,
	0.3828823864f,  -0.1863277107f,   0.1894662082f,   0.0130590191f,   0.3582788408f,  -0.1048306376f,
	0.4695598185f,   0.0005822479f,   0.0215908568f,   0.1590894014f,   0.1812935472f,   0.2277778387f,
	0.2749648392f,  -0.0034784635f,   0.1195252612f,  -0.0147298602f,  -0.1201664433f,   0.1853749603f,
	0.3727698028f,   0.1208133101f,   0.1552285254f,  -0.2929463685f,  -0.0319165327f,  -0.2801427841f,
	0.1229342520f,  -0.0770294443f,   0.3088169992f,   0.0102010779f,   0.2728537023f,   0.1347978562f,
	-0.0869462490f,   0.3717875183f,  -0.1925230026f,  -0.5027611852f,   0.2777010798f,   0.0475167632f,
	-0.1612769365f,  -0.1517991275f,  -0.0450463109f,   0.2833696008f,  -0.0469431244f,   0.0061148023f,
	-0.2513997853f,  -0.3362370431f,   0.1756304204f,   0.0021756925f,  -0.0238230564f,   0.1058372185f,
	0.2156017423f,   0.0518529266f,   0.4475280941f,  -0.2680377960f,  -0.3079445064f,  -0.2119994909f,
	0.0534755811f,   0.0375069790f,  -0.2581984699f,  -0.0854899362f,   0.0437496752f,  -0.0461137667f,
	0.3587484062f,   0.4179121852f,  -0.7259483933f,   0.1718530506f,   0.1109958738f,  -0.4270589054f,
	-0.7259358168f,   0.2119649798f,   0.2242993414f,  -0.0231018178f,   0.3117823303f,  -0.7559219599f,
	-0.3154771030f,  -0.3583543897f,  -0.0484839156f,   0.0964081436f,  -0.1811893880f,  -0.0563121326f,
	-0.0341558605f,   0.3461432457f,   0.2057082653f,  -0.2548432052f,  -0.0865732133f,   0.1220105812f,
	-0.7022078037f,  -0.0759886876f,   0.1309492439f,  -0.3554847538f,  -0.0559493564f,  -0.1401096135f,
	0.6169387698f,  -0.5934659243f,  -0.6863519549f,   0.1603223830f,   0.4819630384f,  -0.0287578478f,
	-0.3005971014f,  -0.3317367733f,   0.2194124311f,   0.0311913118f,  -0.1904049218f,   0.0029535419f,
	0.2038159668f,   0.0808285028f,   0.0716750100f,  -0.2419114709f,   0.3073709905f,  -0.2072141171f,
	-0.2526946366f,   0.0920679495f,   0.3773762286f,  -0.4270222783f,   0.0451847315f,   0.0111984778f,
	0.3151340485f,   0.1989306957f,   0.1090465561f,   0.1645976454f,   0.1365783811f,   0.0670591965f,
	0.2455449253f,  -0.3488976061f,  -0.1211639494f,  -0.2559466064f,  -0.1572555453f,   0.3102026284f,
	-0.3081493974f,  -0.1460877359f,  -0.3903660774f,   0.2113102823f,  -0.2202250659f,   0.7295459509f,
	-0.3972065449f,   0.0000704880f,  -0.4058693647f,  -0.0669092163f,   0.1613937467f,  -0.0111945746f,
	0.1968061775f,   0.4585066736f,   0.1365050226f,  -0.1072725579f,   0.2966425121f,   0.0142772142f,
	0.0606534518f,  -0.1676124483f,   0.1902945191f,   0.0090886718f,   0.1387619227f,   0.1971690804f,
	-0.3131308556f,   0.2540001273f,   0.5568898916f,   0.1781738251f,   0.1258859783f,   0.5446252227f,
	-0.0921459794f,   0.1014388055f,   0.1619512290f,  -0.1780032516f,   0.3961583972f,  -0.3093445599f,
	-0.6684858799f,   0.3773379028f,  -0.0496807694f,   0.0823535398f,   0.6661973596f,  -0.4889307320f,
	-0.3082023263f,   0.2564660907f,   0.1130634993f,  -0.2926407158f,  -0.3048334420f,   0.2299354076f,
	0.1205499768f,  -0.3625735939f,  -0.3099112213f,   0.2782205343f,   0.0695896670f,   0.3508651853f,
	0.3269066215f,  -0.3641798794f,   0.0852168575f,   0.3727891743f,  -0.0205204803f,   0.3692860305f,
	0.4268071353f,  -0.0382793397f,  -0.1639816165f,  -0.6164924502f,   0.1347639710f,   0.3920131624f,
	-0.3747953475f,  -0.1304055005f,   0.3661991656f,   0.2667595148f,   0.0730271488f,   0.0213399511f,
	0.2790589929f,  -0.3755960763f,  -0.1607140750f,   0.2905602157f,   0.2822409570f,   0.0179960560f,
	-0.0250099245f,  -0.1446444839f,  -0.2589220405f,   0.1639451385f,   0.2131049931f,   0.2780880332f,
	-0.4796707630f,   0.1740389615f,  -0.0741765499f,  -0.3096640408f,  -0.3888900280f,   0.2538502514f,
	-0.1085934639f,  -0.0076770890f,  -0.3035930097f,   0.6324143410f,  -0.2246436179f,   0.0181428175f,
	0.1366072744f,   0.1841516495f,   0.0214494560f,   0.0063716578f,  -0.3687143326f,  -0.2372146398f,
	0.2692613304f,   0.2301853895f,   0.3092046678f,  -0.4908881485f,   0.3946585059f,   0.2755706906f,
	-0.4439943135f,  -0.0912996829f,  -0.0554455817f,   0.4056006670f,   0.1164904386f,  -0.4414778948f,
	0.0921249911f,  -0.0948090479f,  -0.3707499206f,  -0.3279393911f,  -0.3554891646f,   0.2067028284f,
	0.2629109025f,  -0.0327457339f,  -0.2920666635f,   0.0862530693f,   0.0002576883f,   0.1783673316f,
	0.1026198417f,   0.3264289796f,   0.1527325064f,   0.1435053349f,  -0.1233730242f,   0.0498395376f,
	0.3636791110f,  -0.1530006528f,   0.2952990532f,  -0.0305896811f,   0.0416990854f,   0.3161478341f,
	0.1054732278f,   0.2944516242f,  -0.0589721762f,  -0.3088688552f,  -0.6575359702f,   0.0225800239f,
	-0.1898597330f,   0.2817341685f,  -0.5006787181f,   0.0155256018f,   0.7586000562f,  -0.4811600745f,
	0.2850076556f,   0.4250700474f,   0.6181730628f,  -0.3713287115f,  -0.3038882613f,  -0.3159240186f,
	0.2779951692f,   0.2743778229f,   0.1609382033f,   0.4065814316f,  -0.4233102500f,  -0.0887242779f,
	-0.3085554540f,   0.3135017753f,  -0.3318547010f,  -0.1242194027f,   0.2572404742f,   0.0125535289f,
	-0.0454513170f,  -0.1723828614f,  -0.2439410537f,  -0.3707419634f,  -0.0902105570f,   0.0895752162f,
	0.0980748758f,   0.1083104461f,  -0.2971757948f,  -0.0939821005f,  -0.1045513153f,   0.1579303294f,
	-0.4199890792f,   0.0050028828f,  -0.0054144827f,  -0.2408383340f,   0.3209127486f,   0.3728800714f,
	-0.5177505612f,   0.4376341403f,   0.0701889917f,   0.0325815827f,   0.2995007634f,  -0.0236042235f,
	0.0571786202f,  -0.1127438694f,   0.7059708834f,  -0.4837586880f,   0.0251010545f,  -0.0653840899f,
	0.0384986997f,  -0.0043312991f,   0.0056615663f,  -0.1943859160f,  -0.5904931426f,   0.0231498089f,
	-0.3985341787f,  -0.4229844511f,  -0.0871407688f,   0.2487521917f,  -0.3604780138f,  -0.0770366341f,
	-0.3523321450f,   0.2567043900f,  -0.2460473329f,  -0.3230591714f,   0.2905825675f,  -0.2963081598f,
	0.1004544720f,  -0.0833493620f,  -0.0457524471f,   0.1175582707f,  -0.3006140888f,   0.0095948214f,
	-0.1915660799f,   0.3439767659f,  -0.1231648549f,  -0.1837527603f,   0.1445625126f,   0.0577244870f,
	-0.1044259220f,   0.0293576233f,   0.6251398325f,  -0.5347042084f,  -0.0891227126f,   0.0710729137f,
	0.0670943707f,   0.1344904155f,  -0.2132427692f,   0.3703876436f,  -0.1109233126f,   0.2666628361f,
	-0.3291365504f,  -0.1827409863f,   0.1646143943f,   0.2104381025f,  -0.3085765243f,   0.0684567466f,
	0.2183363885f,   0.0406453162f,   0.0553788543f,   0.1330429316f,   0.1994683892f,   0.5605187416f,
	-0.3712354004f,  -0.4301689863f,   0.0173363108f,   0.3079377413f,  -0.0354679860f,   0.2081438452f,
	-0.1975405067f,   0.2287665009f,  -0.6049900651f,  -0.0195411630f,   0.0064954008f,  -0.2203188986f,
	-0.1536013633f,   0.0181874149f,  -0.0876148641f,   0.0646615028f,  -0.7844406366f,  -0.0748029575f,
	0.1389267892f,  -0.0947791040f,   0.2903243899f,  -0.0527030937f,   0.0510212295f,   0.3136970401f,
	-0.1103928611f,  -0.4195773602f,   0.3767500222f,   0.4876728058f,  -0.2707878649f,   0.3448970914f,
	0.3051990867f,  -0.5205830932f,   0.1488657147f,   0.1078541428f,   0.0852958411f,   0.1668252051f,
	0.3433324397f,  -0.2597616613f,  -0.0454815179f,   0.3374392688f,  -0.1913357377f,  -0.0665921792f,
	0.4670220613f,   0.0325163491f,   0.1169560477f,  -0.1095435843f,  -0.0928598568f,   0.3011244833f,
	0.3625136912f,  -0.2753498256f,   0.0178423114f,  -0.5168299675f,  -0.2561403811f,   0.0702120736f,
	0.0041252594f,   0.2824798524f,   0.1120082811f,  -0.2400726378f,   0.1111201122f,  -0.0722680464f,
	-0.0359417014f,  -1.2161991596f,  -0.3809402287f,   0.4168404043f,   0.0645785108f,  -0.2141750604f,
	0.2050566226f,  -0.3031305969f,   0.5820810795f,   0.1039931625f,   0.1122519374f,  -0.1151326224f,
	0.5517948270f,   0.1628809124f,   0.0199202858f,   0.3196378350f,  -0.4058596194f,  -0.5588610172f,
	0.2002623528f,  -0.6595928669f,   0.2771125138f,  -0.2703745365f,   0.2535532415f,  -0.1792154610f,
	0.2123929560f,   0.1076908037f,  -0.0943947285f,  -0.4046759605f,  -0.3056538701f,   0.1769855320f,
	0.0598790571f,   0.2676261961f,  -0.2816351652f,   0.2086216658f,  -0.0544359870f,   0.5466299057f,
	-0.5932318568f,   0.2514832020f,   0.3704532683f,  -0.0114888940f,   0.3448728621f,   0.3359648585f,
	0.4225662649f,   0.2416350991f,   0.3384010196f,  -0.3864426315f,  -0.1513763666f,   0.1253888905f,
	0.0232320689f,   0.3474538326f,  -0.0371433459f,  -0.2647042274f,  -0.0986696631f,   0.1360689551f,
	-0.4942466021f,  -0.4749728143f,  -0.2934777439f,   0.5605555177f,   0.4085922539f,   0.2480854839f,
	0.3494893610f,   0.2789517939f,  -0.0529836603f,   0.0713124797f,  -0.2722049654f,  -0.3547461927f,
	-0.2206318080f,  -0.1250443757f,  -0.3765477836f,   0.0038160232f,   0.3732418716f,  -0.0059614554f,
	-0.6074298620f,  -0.1408495456f,   0.3913525641f,   0.4533235729f,   0.0044722031f,   0.1637606919f,
	0.1946843266f,  -0.1286933124f,   0.2327484637f,   0.2627699375f,   0.2799988687f,  -0.4056741595f,
	0.2780722976f,   0.3062019348f,   0.1800106913f,   0.4394435585f,  -0.0802295730f,  -0.3711558580f,
	0.2959847450f,   0.3220897317f,   0.2177911848f,  -0.0012492388f,  -0.1622278839f,   0.1498550624f,
	-0.0548977256f,  -0.1996499896f,  -0.2774462402f,   0.0174648575f,  -0.2714540362f,   0.2194776684f,
	0.2009671777f,   0.2619020045f,  -0.0995841697f,   0.2246294618f,   0.2311713099f,   0.2740406096f,
	0.0870708227f,   0.5517452359f,  -0.2011771947f,   0.3156726062f,  -0.1403077841f,   0.1330770254f,
	-0.0118784150f,  -0.0588856861f,   0.0431311429f,   0.1211714372f,   0.6200023890f,   0.3342638910f,
	-0.1416452527f,  -0.4800577164f,   0.0001942730f,   0.3101205528f,  -0.1446288973f,   0.0980847552f,
	-0.5388451815f,   0.3447850049f,  -0.3603476584f,   0.9788254499f,   0.2751916945f,  -0.3577618897f,
	-0.4274919033f,  -0.8037786484f,  -0.6702057719f,   0.4607912302f,  -0.4000319541f,  -0.5836654305f,
	0.4990168810f,   0.2785968482f,  -0.6834291816f,   0.5873898864f,  -0.4392448366f,   0.9979138970f
};
const float g_bias_float_l15[FLTHIDLAYER * FLTHIDNODE + OUTDIM] = {
	0.0411589295f,   0.0077958074f,   0.2498653382f,   0.0033750869f,  -0.0363829397f,   0.0381735787f,
	-0.0477682799f,   0.0722901449f,  -0.1461737603f,   0.0775098577f,  -0.0781679973f,  -0.0188530590f,
	-0.0109770726f,  -0.1033333614f,   0.0442735963f,  -0.0948966667f,   0.1990186423f,   0.0160026886f,
	-0.0196934119f,   0.0117234625f,   0.0079370858f,   0.0681606457f,   0.0028177293f,  -0.0185232442f,
	-0.0076546264f,   0.0759502500f,  -0.0006954453f,   0.0292908512f,  -0.0089186253f,  -0.0773560479f,
	-0.0369015038f,   0.0235174000f,   0.0639816821f,   0.0140132671f,  -0.0209534522f,  -0.0392958038f,
	0.0246557575f
};

const float g_fat_min_fix_l15[FIXINPUTDIM] = {
	 1.00000f,   0.00000f,   0.00000f,   0.00000f,   0.04812f,   0.16898f,   2.50005f,   4.00000f,   3.00000f,
	 6.00000f,   1.80000f,   2.00000f,  25.46875f,   3.00000f,   0.00000f,   1.00000f,   0.00123f,   0.00000f,
	 0.00000f,   0.58333f,  25.33333f,   0.00000f,   0.33314f,   4.00000f,   4.00000f,   4.00000f
};
const float g_fat_max_fix_l15[FIXINPUTDIM] = {
	20.00000f,   1.00000f,   5.15655f,  40.00000f, 169.99622f,   8.90676f, 999.90000f,  31.00000f,  34.00000f,
	32.00000f,  20.00000f,  29.00000f,  45.36364f,  20.00000f,  20.00000f,  20.00000f, 999.90002f,  16.00000f,
	16.00000f,  20.00000f,  45.13043f, 253.05525f,  12.36829f,  31.00000f,  36.00000f,  29.00000f
};

const float g_fat_min_pre_l15[PREINPUTDIM] = {
	0.41020f,   0.00000f,   4.00000f,   1.00000f,   3.00170f,   0.00005f,   4.00000f,   6.00000f,   5.00000f,
	4.00000f,   0.32525f,   0.11163f
};
const float g_fat_max_pre_l15[PREINPUTDIM] = {
	9.71709f,  20.00000f,  28.00000f, 371.00000f, 999.90002f,   0.09256f,  23.00000f,  42.00000f,  31.00000f,
	28.00000f,   7.02313f, 170.02869f
};

const float g_fat_min_float_l15[FLTINPUTDIM] = {
	1.00000f,   0.00000f,   0.00000f,   0.00000f,   0.00000f,   0.00000f,   1.00000f,   0.00000f,   0.00000f,
	2.00000f,   0.00000f,   0.00000f,   0.00000f,   1.00000f,   0.00000f,   0.00000f,   0.00057f,   0.00000f,
	0.00000f
};

const float g_fat_max_float_l15[FLTINPUTDIM] = {
	20.00000f,   1.00000f,   6.41178f,  51.00000f, 351.53548f,  23.22227f, 843.69794f,  37.00000f,  38.00000f,
	36.00000f,  20.00000f,  30.00000f,  46.78125f,  20.00000f,  20.00000f,  19.00000f, 999.90002f,  16.00000f,
	16.00000f
};

const float g_min_herr_spp = 0.00149f;
const float g_max_herr_spp = 93.34673f;

const float g_min_verr_spp = 0.00001f;
const float g_max_verr_spp = 66.86906f;

const float g_min_herr_fix_sdx24 = 0.00008f;
const float g_max_herr_fix_sdx24 = 4.18735f;


const float g_min_herr_float_sdx24 = 0.00160f;
const float g_max_herr_float_sdx24 = 5.81870f;

const float g_min_herr_pre_sdx24 = 0.00007f;
const float g_max_herr_pre_sdx24 = 1.12160f;

const float g_min_herr_fix_l15 = 0.00004f;
const float g_max_herr_fix_l15 = 4.82364f;
const float g_min_verr_fix_l15 = 0.00000f;
const float g_max_verr_fix_l15 = 4.91666f;

const float g_min_herr_pre_l15 = 0.00023f;
const float g_max_herr_pre_l15 = 0.81202f;
const float g_min_verr_pre_l15 = 0.00000f;
const float g_max_verr_pre_l15 = 1.22716f;

const float g_min_herr_float_l15 = 0.00113f;
const float g_max_herr_float_l15 = 49.39267f;
const float g_min_verr_float_l15 = 0.00011f;
const float g_max_verr_float_l15 = 32.09141f;

const model_t g_model_fix_sdx24 = { FIXINPUTDIM,FIXHIDLAYER,FIXHIDNODE,0,1,"fix_sdx24",g_coes_fix_sdx24,g_bias_fix_sdx24,g_fat_max_fix_sdx24,g_fat_min_fix_sdx24,&g_max_herr_fix_sdx24,&g_min_herr_fix_sdx24 };
const model_t g_model_float_sdx24 = { FLTINPUTDIM,FLTHIDLAYER,FLTHIDNODE,0,1,"float_sdx24",g_coes_float_sdx24,g_bias_float_sdx24,g_fat_max_float_sdx24,g_fat_min_float_sdx24,&g_max_herr_float_sdx24,&g_min_herr_float_sdx24 };
const model_t g_model_single = { SPPINPUTDIM,SPPHIDLAYER,SPPHIDNODE,0,0,"single",g_coes_spp,g_bias_spp,g_fat_max_spp,g_fat_min_spp,&g_max_herr_spp,&g_min_herr_spp };
const model_t g_model_pre_sdx24 = { PREINPUTDIM,PREHIDLAYER,PREHIDNODE,0,1,"pre_sdx24",g_coes_pre_sdx24,g_bias_pre_sdx24,g_fat_max_pre_sdx24,g_fat_min_pre_sdx24,&g_max_herr_pre_sdx24,&g_min_herr_pre_sdx24 };

const model_t g_model_fix_l15 = { FIXINPUTDIM,FIXHIDLAYER,FIXHIDNODE,0,1,"fix_l15",g_coes_fix_l15,g_bias_fix_l15,g_fat_max_fix_l15,g_fat_min_fix_l15,&g_max_herr_fix_l15,&g_min_herr_fix_l15 };
const model_t g_model_pre_l15 = { PREINPUTDIM,PREHIDLAYER,PREHIDNODE,0,1,"pre_l15",g_coes_pre_l15,g_bias_pre_l15,g_fat_max_pre_l15,g_fat_min_pre_l15,&g_max_herr_pre_l15,&g_min_herr_pre_l15 };
const model_t g_model_float_l15 = { FLTINPUTDIM,FLTHIDLAYER,FLTHIDNODE,0,1,"float_l15",g_coes_float_l15,g_bias_float_l15,g_fat_max_float_l15,g_fat_min_float_l15,&g_max_herr_float_l15,&g_min_herr_float_l15 };

static int gnss_rtk_unc_sdx24_model_check(int state, int prefixf);

static void gnss_rtk_unc_sdx24_model_debug(int state, int prefixf)
{
	int satn = 0, satnused=0;
	int model_used = gnss_rtk_unc_sdx24_model_check(state, prefixf);
	unc_scene_t *scene_tag = NULL;
	scene_tag = ag_pe_get_scene_tag_unc();
	//if (!scene_tag) return;
	satn = scene_tag->gps_num + scene_tag->gal_num + scene_tag->gln_num + scene_tag->bds_num;
	if (state == SOLQ_FIX) satnused = rtkctrl.fat.satn[0];
	else if (state == SOLQ_FLOAT && !prefixf) satnused = rtkctrl.fat.satn[1];
	else if (state == SOLQ_FLOAT && prefixf) satnused = rtkctrl.prefix_sat;
	else satnused = 0;
	gnss_util_trace(3, "scenetag,%d,%f,%d,%d,%d,%f,%f\n", scene_tag->avg_cn0, scene_tag->pdop, satn, satnused, model_used, scene_tag->cycle_clip_ratio, gpz_user_pvt->posfix_t);
	GLOGD("scenetag,%d,%f,%d,%d,%d,%f,%f", scene_tag->avg_cn0, scene_tag->pdop, satn, satnused, model_used, scene_tag->cycle_clip_ratio, gpz_user_pvt->posfix_t);
}
/* check model sel for sdx24 opensky scene----------------------------------------------
*
* args   : none
* return :
* author : none
*-------------------------------------------------------------------------------------*/
static int gnss_rtk_unc_sdx24_model_check(int state, int prefixf)
{
	unc_scene_t *scene_tag = NULL;
	int satn = 0;
	//if (g_pe_cfg.sub_chipType != SUB_CHIPTYPE_QCOM_DF) return 0;
	if (state == SOLQ_SINGLE) return 0;
	scene_tag = ag_pe_get_scene_tag_unc();
	//if (!scene_tag) return 0;

	satn = scene_tag->gps_num + scene_tag->gal_num + scene_tag->gln_num + scene_tag->bds_num;
	//if (scene_tag->avg_cn0 >= 40 && scene_tag->pdop < 2.2 && (scene_tag->gps_L1_num >= 6 && (
	//	scene_tag->gal_num >= 4 && scene_tag->gln_num >= 4 && scene_tag->bds_num >= 4)))
	if (scene_tag->avg_cn0 >= 38 && scene_tag->pdop <= 2.2 && satn >= 18 && scene_tag->cycle_clip_ratio <= 60)
	{
		if (state == SOLQ_FIX && rtkctrl.fat.satn[0] > 5) return 1;
		else if (state == SOLQ_FLOAT && !prefixf && rtkctrl.fat.satn[1] > 15) return 1;
		else if (state == SOLQ_FLOAT && prefixf && rtkctrl.prefix_sat > 5) return 1;
		else return 0;
	}
	return 0;
}

/* select a model----------------------------------------------------------------------
*
* args   : none
* return :
* author : none
*-------------------------------------------------------------------------------------*/
extern void gnss_rtk_unc_get_model(int state, int prefixf,const model_t **modelh, const model_t **modelv)
{
	int sdx24flg = gnss_rtk_unc_sdx24_model_check(state, prefixf);
	gnss_rtk_unc_sdx24_model_debug(state, prefixf);
	if (state == SOLQ_FIX)
	{
		if(0) *modelh = &g_model_fix_sdx24;
		else *modelh = &g_model_fix_l15;
		*modelv = NULL;
	}
	else if (state == SOLQ_SINGLE)
	{
		*modelh = &g_model_single;
		*modelv = NULL;
	}
	else if (prefixf)
	{
		if(sdx24flg) *modelh = &g_model_pre_sdx24;
		else *modelh = &g_model_pre_l15;
		*modelv = NULL;
	}
	else
	{
		if(sdx24flg) *modelh = &g_model_float_sdx24;
		else *modelh = &g_model_float_l15;
		*modelv = NULL;
	}
}


/* init specify long term variable--------------------------------------------------------
*
* args   : none
* return :
* author : none
*-------------------------------------------------------------------------------------*/
extern void gnss_rtk_state_sta_init(rtk_t *rtk)
{
	rtk->fixstateseq = 0;
	rtk->druseseq = 0;
	rtk->prefatstate = 0;
	rtk->fatstatecnt = 0;
	memset(&(rtk->unc), 0, sizeof(uncertainty_t));
}

/* update specify long term variable----------------------------------------------------
*
* args   : none
* return :
* author : none
*-------------------------------------------------------------------------------------*/
extern void gnss_rtk_state_sta(rtk_t *rtk, int state)
{
	uint64_t soli = (state == SOLQ_FIX) ? 0 : 1;
	uint64_t fatstate = (uint64_t)2 * soli + (uint64_t)rtk->rtduseflag + 1;
	rtk->fixstateseq <<= 1;
	rtk->druseseq <<= 1;
	if (state == SOLQ_NONE)
	{
		rtk->fixstateseq = 0;
		rtk->druseseq = 0;
		rtk->fatstatecnt = 0;
		rtk->prefatstate = 0;
		return;
	}
	if (state == SOLQ_FIX)
	{
		rtk->fixstateseq |= 1;
	}
	else
	{
		rtk->fixstateseq |= 0;
	}
	if (rtk->rtduseflag)
	{
		rtk->druseseq |= 1;
	}
	else
	{
		rtk->druseseq |= 0;
	}
	if (rtk->prefatstate == fatstate)
	{
		rtk->fatstatecnt++;
	}
	else
	{
		rtk->fatstatecnt = 1;
	}
	rtk->prefatstate = fatstate;
}

/* output factors----------------------------------------------------------------------
*
* args   : none
* return :
* author : none
*-------------------------------------------------------------------------------------*/
extern void gnss_rtk_factor(rtk_t *rtk, int state, double rherr, double ruerr)
{
	int soli = state == SOLQ_FIX ? 0 : 1;
	int i = 0;
	int openskyc = sumofbit1(rtk->qcpasscnt, 16);
	int closeskyc = sumofbit1(rtk->closkycnt, 16);
	double ratio = rtk->sol.ratio > 999.9 ? 999.9 : rtk->sol.ratio;
	double sigmad = 0;
	int drn = 0;
#ifdef PLAYBACK_MODE
	int druseage = 0;
#endif
	int drusecnt = sumofbit1(rtk->druseseq, HISFATTHRES);
	int fixstatecnt = sumofbit1(rtk->fixstateseq, HISFATTHRES);
	int kfc = rtk->kfcnt >= HISFATTHRES ? HISFATTHRES : rtk->kfcnt;
	int* nbias = rtk->fat.phasen;
	int* coden = rtk->fat.coden;
	int* satn = rtk->fat.satn;
	double* avelock = rtk->fat.avelock;
	double* avecn0 = rtk->fat.avecn0;
	double* sigmap = rtk->fat.sigmap;
	double* sigmac = rtk->fat.sigmac;
	double prefixage = timediff(rtk->sol.time, rtk->prefixt);
	double prefixratio = rtk->prefixr;
	int prefixsat = rtk->prefix_sat;
	int prefixn = rtk->prefixn;
	double prefixsigma = rtk->prefixsigma0;
	rtkfactor_t* lfat = &(rtk->unc.latest_fix_fat);
	if (ratio < 1.0)
	{
		ratio = 1.0;
		rtk->fat.rs0 = 999.9;
	}
	if (rtk->rtduseflag && rtk->fat.drn)
	{
		sigmad = rtk->fat.sigmad;
		drn = rtk->fat.drn;
#ifdef PLAYBACK_MODE
		druseage = 1;
#endif
	}
	rtk->fat.state = 2 * soli + rtk->rtduseflag + 1;
	rtk->fat.sigmad = sigmad;
	rtk->fat.drn = drn;
	rtk->fat.ratio = ratio;
#ifdef PLAYBACK_MODE
	int smtn = rtk->fatstatecnt >= HISFATTHRES ? HISFATTHRES : rtk->fatstatecnt;
	//if (state == SOLQ_FIX) rtk->unc.latest_fix_fat = rtk->fat;
	if (soli == 1 && !rtk->prefixf) {
		gnss_util_trace(3, "rtkfactort,%f,%d,%d,%d,%d,%f,%d,%f,%f,%f,%d,%d,%d,%f,%d,%f,%d,%d,%d,%f,%d,%d,%f,%f\n", rtk->ptor, state, soli, smtn, druseage, sigmad, drn, sigmap[soli], sigmac[soli], ratio, nbias[soli], coden[soli], rtk->fat.ns,
			avelock[soli], satn[soli], avecn0[soli], kfc, drusecnt, fixstatecnt, rtk->fat.rs0, openskyc, closeskyc, rherr, ruerr);
	}
	else if(soli == 1 && rtk->prefixf) {
		//gnss_util_trace(3, "rtkfactorp,%f,%d,%d,%d,%d,%f,%d,%f,%f,%f,%d,%d,%d,%f,%d,%f,%d,%d,%d,%f,%d,%d,%f,%f,%f,%d,%d,%f,%f\n", rtk->ptor, state, soli, smtn, druseage, sigmad, drn, sigmap[soli], sigmac[soli], ratio, nbias[soli], coden[soli], rtk->fat.ns,
		//	avelock[soli], satn[soli], avecn0[soli], kfc, drusecnt, fixstatecnt, rtk->fat.rs0, openskyc, closeskyc, prefixage, prefixratio, prefixsigma, prefixsat, prefixn, rherr, ruerr);		
		gnss_util_trace(3, "rtkfactorp,%f,%d,%d,%d,%f,%f,%f,%d,%f,%d,%f,%f,%f,%d,%d,%d,%d,%f,%f,%f,%f,%f,%f\n", rtk->ptor, state, soli, smtn, sigmap[soli], sigmac[soli], avelock[soli], satn[soli], avecn0[soli],
			fixstatecnt, prefixage, prefixratio, prefixsigma, prefixsat, prefixn, lfat->phasen[0], lfat->satn[0], lfat->sigmac[0], lfat->sigmap[0], lfat->avecn0[0], lfat->avelock[0], rherr, ruerr);
	}
	else {
		gnss_util_trace(3, "rtkfactorx,%f,%d,%d,%d,%d,%f,%d,%f,%f,%f,%d,%d,%d,%f,%d,%f,%d,%d,%d,%f,%d,%d,%f,%f,%f,%f,%d,%d,%d,%f,%f\n", rtk->ptor, state, soli, smtn, druseage, sigmad, drn, sigmap[soli], sigmac[soli], ratio, nbias[soli], coden[soli], rtk->fat.ns,
			avelock[soli], satn[soli], avecn0[soli], kfc, drusecnt, fixstatecnt, rtk->fat.rs0, openskyc, closeskyc, avelock[1], avecn0[1], sigmap[1], sigmac[1], nbias[1], coden[1], satn[1], rherr, ruerr);
	}
#endif
}

/* output factors----------------------------------------------------------------------
*
* args   : none
* return :
* author : none
*-------------------------------------------------------------------------------------*/
extern void gnss_rtk_factor_out(rtk_t *rtk, int state)
{
#if defined(PLAYBACK_MODE)
	//int scene = gnss_unc_opensky_check();
	int scene = 1;
	if (gpz_kf_data->meas_blk&&gpz_kf_data->meas_blk->hpRefQflag[1] > 0 && scene)
	{
		double pos_err[3] = { 0.0 };
		double realhorierr = 0.0, realuperr = 0.0;
		gnss_Pe_PosErr_Calc(rtk->sol.rr, gpz_Meas->hpRefEcef, pos_err);
		realhorierr = sqrt(pos_err[0] * pos_err[0] + pos_err[1] * pos_err[1]);
		realuperr = pos_err[2];
		if ((state == SOLQ_FIX || state == SOLQ_FLOAT || state == SOLQ_DGPS))
		{
			gnss_rtk_factor(rtk, state, realhorierr, realuperr);
		}
	}
#endif
}

/* get factors as input of ann----------------------------------------------------------
*
* args   : none
* return :
* author : none
*-------------------------------------------------------------------------------------*/
extern void gnss_rtk_unc_getfat(rtk_t *rtk, int state, float *fat)
{
	int soli = state == SOLQ_FIX ? 0 : 1;
	int i = 0;
	int openskyc = sumofbit1(rtk->qcpasscnt, 16);
	int closeskyc = sumofbit1(rtk->closkycnt, 16);
	double ratio = rtk->sol.ratio > 999.9 ? 999.9 : rtk->sol.ratio;
	double sigmad = 0;
	int drn = 0;
	int druseage = 0;
	int drusecnt = sumofbit1(rtk->druseseq, HISFATTHRES);
	int fixstatecnt = sumofbit1(rtk->fixstateseq, HISFATTHRES);
	int kfc = rtk->kfcnt >= HISFATTHRES ? HISFATTHRES : rtk->kfcnt;
	int smtn = 0;
	int* nbias = rtk->fat.phasen;
	int* coden = rtk->fat.coden;
	int* satn = rtk->fat.satn;
	double* avelock = rtk->fat.avelock;
	double* avecn0 = rtk->fat.avecn0;
	double* sigmap = rtk->fat.sigmap;
	double* sigmac = rtk->fat.sigmac;
	double prefixage = timediff(rtk->sol.time, rtk->prefixt);
	double prefixratio = rtk->prefixr;
	int prefixsat = rtk->prefix_sat;
	int prefixn = rtk->prefixn;
	double prefixsigma = rtk->prefixsigma0;
	rtkfactor_t* lfat = &(rtk->unc.latest_fix_fat);
	if (rtk->rtduseflag && rtk->fat.drn)
	{
		sigmad = rtk->fat.sigmad;
		drn = rtk->fat.drn;
		druseage = 1;
	}
	rtk->fat.state = 2 * soli + rtk->rtduseflag + 1;
	rtk->fat.sigmad = sigmad;
	rtk->fat.drn = drn;
	rtk->fat.ratio = ratio;
	if (ratio < 1.0)
	{
		ratio = 1.0;
		rtk->fat.rs0 = 999.9;
	}
	smtn = rtk->fatstatecnt >= HISFATTHRES ? HISFATTHRES : rtk->fatstatecnt;
	if (state == SOLQ_FIX) rtk->unc.latest_fix_fat = rtk->fat;
	if (soli == 0)
	{
		fat[0] = (float)smtn;
		fat[1] = (float)druseage;
		fat[2] = (float)sigmad;
		fat[3] = (float)drn;
		fat[4] = (float)sigmap[0];
		fat[5] = (float)sigmac[0];
		fat[6] = (float)ratio;
		fat[7] = (float)nbias[0];
		fat[8] = (float)coden[0];
		fat[9] = (float)rtk->fat.ns;
		fat[10] = (float)avelock[0];
		fat[11] = (float)satn[0];
		fat[12] = (float)avecn0[0];
		fat[13] = (float)kfc;
		fat[14] = (float)drusecnt;
		fat[15] = (float)fixstatecnt;
		fat[16] = (float)rtk->fat.rs0;
		fat[17] = (float)openskyc;
		fat[18] = (float)closeskyc;
		fat[19] = (float)avelock[1];
		fat[20] = (float)avecn0[1];
		fat[21] = (float)sigmap[1];
		fat[22] = (float)sigmac[1];
		fat[23] = (float)nbias[1];
		fat[24] = (float)coden[1];
		fat[25] = (float)satn[1];
	}
	else if (rtk->prefixf)
	{
		fat[0] = (float)sigmac[1];
		fat[1] = (float)avelock[1];
		fat[2] = (float)satn[1];
		fat[3] = (float)prefixage;
		fat[4] = (float)prefixratio;
		fat[5] = (float)prefixsigma;
		fat[6] = (float)prefixsat;
		fat[7] = (float)prefixn;
		fat[8] = (float)lfat->phasen[0];
		fat[9] = (float)lfat->satn[0];
		fat[10] = (float)lfat->sigmac[0];
		fat[11] = (float)lfat->sigmap[0];
	}
	else
	{
		fat[0] = (float)smtn;
		fat[1] = (float)druseage;
		fat[2] = (float)sigmad;
		fat[3] = (float)drn;
		fat[4] = (float)sigmap[1];
		fat[5] = (float)sigmac[1];
		fat[6] = (float)ratio;
		fat[7] = (float)nbias[1];
		fat[8] = (float)coden[1];
		fat[9] = (float)rtk->fat.ns;
		fat[10] = (float)avelock[1];
		fat[11] = (float)satn[1];
		fat[12] = (float)avecn0[1];
		fat[13] = (float)kfc;
		fat[14] = (float)drusecnt;
		fat[15] = (float)fixstatecnt;
		fat[16] = (float)rtk->fat.rs0;
		fat[17] = (float)openskyc;
		fat[18] = (float)closeskyc;
	}
}

static void gnss_rtk_unc_normalise(float *input, const float* max, const float* min, int dim)
{
	int i = 0;
	for (i = 0; i < dim; i++)
	{
		input[i] = (input[i] - min[i]) / (max[i] - min[i]);
	}
}

static void gnss_rtk_unc_invnorm(float *input, const float* max, const float* min, int dim)
{
	int i = 0;
	for (i = 0; i < dim; i++)
	{
		input[i] = input[i] * (max[i] - min[i]) + min[i];
	}
}

static void gnss_rtk_unc_act(float *win, int dim)
{
	int i = 0;
	for (i = 0; i < dim; i++)
	{
		win[i] = win[i] > 0 ? win[i] : 0;
	}
}


static double gnss_rtk_unc_check(double pred, int state, int prefixf, int horv)
{
	if (horv == 0)
	{
		if (state == SOLQ_FIX)
		{
			if (pred < 0) pred = -pred;
			if (pred < 0.01) pred = 0.01;
			if (pred > 10) pred = 10.0;
		}
		else if ((state == SOLQ_FLOAT || state == SOLQ_DGPS) && prefixf)
		{
			if (pred < 0) pred = -pred;
			if (pred < 0.01) pred = 0.01;
			if (pred > 10) pred = 10.0;
		}
		else if ((state == SOLQ_FLOAT || state == SOLQ_DGPS) && !prefixf)
		{
			if (pred < 0) pred = -pred;
			if (g_pe_cfg.sub_chipType == SUB_CHIPTYPE_QCOM_DF)
			{
				if (rtkctrl.fat.sigmac[1] > 2.0 || rtkctrl.fat.sigmap[1] > 2.0) pred += 0.6;
				else pred += 0.4;
			}
			else
			{
				pred += 0.3;
			}
			if (state == SOLQ_FLOAT && pred > 15) pred = 15.0;
			if (state == SOLQ_DGPS && pred > 20) pred = 20.0;
		}
		else if (state == SOLQ_SINGLE)
		{
			if (pred < 0) pred = -pred;
			pred += 1.0;
			if (pred > 50) pred = 50.0;
		}
		else
		{
			pred = 999.9;
		}
	}
	else
	{
		if (state == SOLQ_FIX)
		{
			if (pred < 0) pred = -pred;
			if (pred < 0.01) pred = 0.25;
			if (pred > 10) pred = 10.0;
		}
		else if ((state == SOLQ_FLOAT || state == SOLQ_DGPS))
		{
			if (prefixf)
			{
				if (pred < 0) pred = -pred;
				if (pred < 0.01) pred = 0.25;
				if (pred > 10) pred = 10.0;
			}
			else
			{
				if (pred < 0) pred = -pred;
				if (g_pe_cfg.sub_chipType == SUB_CHIPTYPE_QCOM_DF)
				{
					if (rtkctrl.fat.sigmac[1] > 2.0 || rtkctrl.fat.sigmap[1] > 2.0) pred += 0.8;
					else pred += 0.6;
				}
				else
				{
					pred += 0.4;
				}
				if (state == SOLQ_FLOAT && pred > 15) pred = 15.0;
				if (state == SOLQ_DGPS && pred > 20) pred = 20.0;
			}
		}
		else if (state == SOLQ_SINGLE)
		{
			if (pred < 0) pred = -pred;
			pred += 1.2;
			if (pred > 50) pred = 50.0;
		}
		else
		{
			pred = 999.9;
		}
	}

	return pred;
}

static uint8_t gnss_pe_unc_prediff_test(uncertainty_t* pvtunc,int state)
{
	double poserr[3] = { 0.0 };
	int8_t testbuff = 0;
	int8_t i = 0;
	if (pvtunc->prediff.preposf == 0)
	{
		memset(&(pvtunc->prediff), 0, sizeof(prediff_t));
		return 0;
	}
	if (state == SOLQ_SINGLE)
	{
		testbuff = 20;
		gnss_Pe_PosErr_Calc(gpz_kf_data->kf_Pvt_Info->ecefPos, pvtunc->prediff.prepos, poserr);
	}
	else if (state == SOLQ_FIX || state == SOLQ_FLOAT || state == SOLQ_DGPS)
	{
		testbuff = 10;
		gnss_Pe_PosErr_Calc(rtkctrl.sol.rr, pvtunc->prediff.prepos, poserr);
	}
	else
	{
		return 0;
	}
	if (pvtunc->prediff.prenum < MAXUNCBUFF)
	{
		for (i = pvtunc->prediff.prenum - 1; i > 0; --i)
		{
			pvtunc->prediff.pos_diff_h[i] = pvtunc->prediff.pos_diff_h[i - 1];
			pvtunc->prediff.pos_diff_v[i] = pvtunc->prediff.pos_diff_v[i - 1];
		}
		pvtunc->prediff.pos_diff_h[0] = (float)sqrt(poserr[0] * poserr[0] + poserr[1] * poserr[1]);
		pvtunc->prediff.pos_diff_v[0] = (float)fabs(poserr[2]);
		pvtunc->prediff.prenum++;
	}
	else
	{
		for (i = MAXUNCBUFF - 1; i > 0; --i)
		{
			pvtunc->prediff.pos_diff_h[i] = pvtunc->prediff.pos_diff_h[i - 1];
			pvtunc->prediff.pos_diff_v[i] = pvtunc->prediff.pos_diff_v[i - 1];
		}
		pvtunc->prediff.pos_diff_h[0] = (float)sqrt(poserr[0] * poserr[0] + poserr[1] * poserr[1]);
		pvtunc->prediff.pos_diff_v[0] = (float)fabs(poserr[2]);
	}
	GLOGI("3,preposdiff,%d,%f,%f,%f", state, gpz_user_pvt->posfix_t, pvtunc->prediff.pos_diff_h[0], pvtunc->prediff.pos_diff_v[0]);
	if (state == SOLQ_SINGLE)
	{
		if (pvtunc->prediff.prenum >= testbuff && pvtunc->huncsmt.uncnum >= testbuff)
		{
			for (i = 0; i < testbuff; i++)
			{
				if (pvtunc->prediff.pos_diff_h[i] > 10.0 || pvtunc->huncsmt.unc_buff[i] > 15.0) return 0;
				//if (pvtunc->prediff.pos_diff_v[i] > 10.0 || pvtunc->vuncsmt.unc_buff[i] > 15.0) return 0;
			}
			return 1;
		}
	}
	else/* if(state == SOLQ_FIX || state == SOLQ_FLOAT || state == SOLQ_DGPS)*/
	{
		if (pvtunc->prediff.prenum >= testbuff && pvtunc->huncsmt.uncnum >= testbuff)
		{
			for (i = 0; i < testbuff; i++)
			{
				if (pvtunc->prediff.pos_diff_h[i] > 1.0 || pvtunc->huncsmt.unc_buff[i] > 1.5) return 0;
				//if (pvtunc->prediff.pos_diff_v[i] > 1.0 || pvtunc->vuncsmt.unc_buff[i] > 1.5) return 0;
			}
			return 1;
		}
	}

	return 0;
}

static int gnss_unc_ab_det(double pred, int state, int horv, int prefixf)
{
	if (state == SOLQ_FIX || state == SOLQ_FLOAT || state == SOLQ_DGPS)
	{
		if (!horv) GLOGI("rtkcontest,%f,%d,%d,%f,%f", gpz_user_pvt->posfix_t, horv, rtkctrl.unc.prediff.preuncconf, pred, rtkctrl.unc.prediff.pos_diff_h[0]);
		else GLOGI("rtkcontest,%f,%d,%d,%f,%f", gpz_user_pvt->posfix_t, horv, rtkctrl.unc.prediff.preuncconf, pred, rtkctrl.unc.prediff.pos_diff_v[0]);
	}
	if (pred < 0.01) return 1;
	if (state == SOLQ_FIX && pred > 10.0) return 1;
	if ((state == SOLQ_FLOAT || state == SOLQ_DGPS) && prefixf && pred > 10.0) return 1;
	if (state == SOLQ_FLOAT && !prefixf && pred > 15.0) return 1;
	if (state == SOLQ_DGPS && !prefixf && pred > 20.0) return 1;
	if (state == SOLQ_SINGLE && pred > 50.0) return 1;
	if (state == SOLQ_SINGLE && g_pvtunc.prediff.preuncconf &&
		((horv == 0 && pred > 3.0 * g_pvtunc.prediff.pos_diff_h[0] && pred > 10.0) ||
		(horv == 1 && pred > 3.0 * g_pvtunc.prediff.pos_diff_v[0] && pred > 10.0))) return 1;
	if ((state == SOLQ_FIX || state == SOLQ_FLOAT || state == SOLQ_DGPS) && rtkctrl.unc.prediff.preuncconf
		&& ((horv == 0 && pred > 3.0 * rtkctrl.unc.prediff.pos_diff_h[0] && pred > 1.0) ||
		(horv == 1 && pred > 3.0 * rtkctrl.unc.prediff.pos_diff_v[0] && pred > 1.5)))
	{
		return 1;
	}
	return 0;
}

static double gnss_unc_ab_smt(uncsmt_t* uncsmt, double pred, double ptor, int state, int prefixf, int horv, char *mn)
{
	double ssum = 0.0;
	double sum = 0.0;
	int i = 0;
	double pred_re = pred;
	int abflag = 0;
	const int smtlen = 10;
	abflag = gnss_unc_ab_det(pred, state, horv, prefixf);
	if (abflag && uncsmt->uncnum > 0)
	{
		if (uncsmt->uncnum >= smtlen)
		{
			ssum = dot(uncsmt->unc_buff, uncsmt->unc_buff, smtlen);
			for (i = 0; i < smtlen; i++)
			{
				sum += uncsmt->unc_buff[i];
			}
			pred_re = ssum / sum;
		}
		else
		{
			ssum = dot(uncsmt->unc_buff, uncsmt->unc_buff, uncsmt->uncnum);
			for (i = 0; i < uncsmt->uncnum; i++)
			{
				sum += uncsmt->unc_buff[i];
			}
			pred_re = ssum / sum;
		}
	}
	pred_re = gnss_rtk_unc_check(pred_re, state, prefixf, horv);
	gnss_util_trace(3, "uncabsmt,%d,%d,%d,%d,%f,%f,%f,%s\n", abflag, horv, state, uncsmt->uncnum, ptor, pred, pred_re, mn);

	return pred_re;
}

/*
static void state_push(double *state_buff, int state, int* uncnum)
{
	int i = 0;
	if (uncnum < MAXUNCBUFF)
	{
		for (i = uncnum - 1; i > 0; --i)
		{
			state_buff[i] = state_buff[i - 1];
		}
		state_buff[0] = state;
		if (uncnum) uncnum++;
	}
	else
	{
		for (i = MAXUNCBUFF - 1; i > 0; --i) {
			state_buff[i] = state_buff[i - 1];
		}
		state_buff[0] = state;
	}
}

static void unc_push(double *unc_buff, double unc, int uncnum)
{
	int i = 0;
	if (uncnum < MAXUNCBUFF)
	{
		for (i = uncnum - 1; i > 0; --i)
		{
			unc_buff[i] = unc_buff[i - 1];
		}
		unc_buff[0] = unc;
	}
	else
	{
		for (i = MAXUNCBUFF - 1; i > 0; --i) {
			unc_buff[i] = unc_buff[i - 1];
		}
		unc_buff[0] = unc;
	}
}

//static void unc_smt_detect(uncsmt_t *uncsmt,int *statebuff, double unc, double higb, double lowb)
static void unc_smt_detect(uncsmt_t *uncsmt, int *statebuff, double unc, int state)
{
	int i = 0;
	int smtext = 1;
	if (state <= SOLQ_NONE && state > SOLQ_SINGLE) return;
	//start
	if (uncsmt->smting != 1)
	{
		if (fabs(unc) > g_hunc_high_b[state])
		{
			uncsmt->smting = 1;
			uncsmt->unc0 = unc;
		}
		uncsmt->smtlen = 0;
		uncsmt->smtlen0 = 0;
	}
	//quit detect
	if (uncsmt->smting == 1 && uncsmt->uncnum >= 4)
	{
		for (i = 0; i < 4; i++)
		{
			if (uncsmt->unc_buff[i] < g_hunc_low_b[statebuff[i]]) smtext &= 1;
			else smtext &= 0;
		}
	}
	else smtext &= 0;

	if (smtext == 1 && uncsmt->smting == 1)
	{
		uncsmt->smting = 0;
		uncsmt->smtlen = 0;
		uncsmt->smtlen0 = 0;
	}
}

static void unc_smt_window_upd(uncsmt_t *uncsmt, int *statebuff, double unc, int state)
{
	if (uncsmt->smting == 1)
	{
		//window update
		if (unc / uncsmt->unc0 > 1.5)
		{
			uncsmt->unc0 = unc;
			uncsmt->smtlen = 0;
		}
		if (uncsmt->smtlen < MAXUNCBUFF)
		{
			uncsmt->smtlen++;
			uncsmt->smtlen0++;
		}
	}
}

static double unc_smt_op(int *uncbuff, int len)
{
	double ssum = 0, sum = 0;
	int i = 0;
	ssum = dot(uncbuff, uncbuff, len);
	for (i = 0; i < len; i++)
	{
		sum += uncbuff[i];
	}
	return ssum / sum;
}

static void gnss_rtk_cfd_unc_smt2(rtk_t* rtk, double unc, int state)
{
	int i = 0;
	//smt detect
	int smtext = 1;
	double ssum = 0;
	double sum = 0;
	unc_push(rtk->unc.thunc_sumt.unc_buff, unc, rtk->unc.thunc_sumt.uncnum);
	state_push(rtk->unc.hunc_stat, state, &(rtk->unc.thunc_sumt.uncnum));
	unc_smt_detect(&(rtk->unc.thunc_sumt), rtk->unc.hunc_stat, unc, state);
	unc_smt_window_upd(&(rtk->unc.thunc_sumt), rtk->unc.hunc_stat,unc,state);
	unc_smt_op(rtk->unc.thunc_sumt.unc_buff, rtk->unc.thunc_sumt.smtlen);
}
*/


static void unc_smt_op(uncsmt_t* uncsmt, double hvunc, int state, int prefix_f)
{
	int i = 0;
	/*smt detect*/
	int smtext = 1;
	double ssum = 0;
	double sum = 0;
	if ((state == SOLQ_DGPS || state == SOLQ_FLOAT) && prefix_f) state = SOLQ_FIX;
	int qnum = 4;
	if (state == SOLQ_FIX) qnum = 4;
	//push unc in buffer
	if (uncsmt->uncnum < MAXUNCBUFF)
	{
		for (i = uncsmt->uncnum - 1; i > 0; --i)
		{
			uncsmt->unc_buff[i] = uncsmt->unc_buff[i - 1];
			uncsmt->state_buff[i] = uncsmt->state_buff[i - 1];
		}
		uncsmt->unc_buff[0] = hvunc;
		uncsmt->state_buff[0] = state;
		uncsmt->uncnum++;
	}
	else
	{
		for (i = MAXUNCBUFF - 1; i > 0; --i) {
			uncsmt->unc_buff[i] = uncsmt->unc_buff[i - 1];
			uncsmt->state_buff[i] = uncsmt->state_buff[i - 1];
		}
		uncsmt->unc_buff[0] = hvunc;
		uncsmt->state_buff[0] = state;
	}
	//smt start
	if (state == SOLQ_FIX && uncsmt->smting != 1)
	{
		if (fabs(hvunc) > FIXUNCHIGHB)
		{
			uncsmt->smting = 1;
			uncsmt->unc0 = hvunc;
		}
		uncsmt->smtlen = 0;
		uncsmt->smtlen0 = 0;
	}
	else if ((state == SOLQ_DGPS || state == SOLQ_FLOAT) && uncsmt->smting != 1)
	{
		if (fabs(hvunc) > FLTUNCHIGHB) {
			uncsmt->smting = 1;
			uncsmt->unc0 = hvunc;
		}
		uncsmt->smtlen = 0;
		uncsmt->smtlen0 = 0;
	}
	else if ((state == SOLQ_SINGLE) && uncsmt->smting != 1)
	{
		if (fabs(hvunc) > SPPUNCHIGHB) {
			uncsmt->smting = 1;
			uncsmt->unc0 = hvunc;
		}
		uncsmt->smtlen = 0;
		uncsmt->smtlen0 = 0;
	}
	else
	{
		;
	}
	//quit detect
	if (uncsmt->smting == 1 && uncsmt->uncnum >= qnum)
	{
		for (i = 0; i < qnum; i++)
		{
			if (uncsmt->state_buff[i] == SOLQ_FIX)
			{
				if (uncsmt->unc_buff[i] < FIXUNCLOWB) smtext &= 1;
				else smtext &= 0;
			}
			else if (uncsmt->state_buff[i] == SOLQ_DGPS || uncsmt->state_buff[i] == SOLQ_FLOAT)
			{
				if (uncsmt->unc_buff[i] < FLTUNCLOWB) smtext &= 1;
				else smtext &= 0;
			}
			else if (uncsmt->state_buff[i] == SOLQ_SINGLE)
			{
				if (uncsmt->unc_buff[i] < SPPUNCLOWB) smtext &= 1;
				else smtext &= 0;
			}
			else
			{
				;
			}
		}
	}
	else smtext &= 0;
	if (smtext == 1 && uncsmt->smting == 1)
	{
		uncsmt->smting = 0;
		uncsmt->smtlen = 0;
		uncsmt->smtlen0 = 0;
	}

	/*do smt*/
	if (uncsmt->smting == 1)
	{
		//window update
		//if (hvunc / uncsmt->unc0 > 1.5 || hvunc - uncsmt->unc0 > 3.0)
		if (hvunc / uncsmt->unc0 > 1.5)
		{
			uncsmt->unc0 = hvunc;
			uncsmt->smtlen = 0;
		}
		if (uncsmt->smtlen < MAXUNCBUFF)
		{
			uncsmt->smtlen++;
			uncsmt->smtlen0++;
		}
		ssum = dot(uncsmt->unc_buff, uncsmt->unc_buff, uncsmt->smtlen);
		for (i = 0; i < uncsmt->smtlen; i++)
		{
			sum += uncsmt->unc_buff[i];
		}
		uncsmt->unc_smt = ssum / sum;
	}
	else
	{
		uncsmt->unc_smt = hvunc;
	}
}

static void gnss_rtk_unc_prefix_unc(rtk_t* rtk,int state, double *upunctest)
{
	double pow = 1.0;
	if (state == SOLQ_FIX)
	{
		rtk->unc.latest_fix_satn = rtk->fat.satn[0];
		rtk->unc.latest_fix_hunc = rtk->unc.hunc;
		rtk->unc.latest_fix_upunc = rtk->unc.upunc;
	}
	else if (rtk->prefixf)
	{
		pow = (double)rtk->unc.latest_fix_satn / rtk->prefix_sat;
		pow = pow > 1.5 ? 1.5 : pow;
		rtk->unc.hunc = rtk->unc.latest_fix_hunc * pow;
		rtk->unc.upunc = rtk->unc.latest_fix_upunc * pow;
		*upunctest = rtk->unc.latest_fix_hunc * pow;
		gnss_util_trace(3, "punc,%d,pref,%d,pow,%f,lunc,%f,punc,%f,satn,%d,prefixs,%d\n", state, rtk->prefixf, pow, rtk->unc.latest_fix_hunc, rtk->unc.hunc, rtk->unc.latest_fix_satn, rtk->prefix_sat);
	}
}

static void gnss_spp_unc_smtout(uncertainty_t *unc, double herr, double uperr, int state)
{
	char strout[1024] = { 0 };
	char *pstr = strout;
	int i = 0;
	//pstr += sprintf(pstr, "uncsmt,%d,%d,%f,%d,%d,%d,%f,%f,%f,%f,%f,%f", state, rtk->prefixf, rtk->sol.time.sec + rtk->sol.time.time, unc->uncnum, unc->smting,
	pstr += sprintf(pstr, "sppuncsmt,%d,%d,%f,%d,%d,%d,%f,%f,%f,%f,%f,%f", state, 0, gpz_user_pvt->posfix_t, unc->huncsmt.uncnum, unc->huncsmt.smting,
                  unc->huncsmt.smtlen, unc->hunc, unc->huncsmt.unc_smt, unc->upunc, unc->upunc_smt, herr, uperr);
	gnss_util_trace(3, "%s\n", strout);

}

/* output unc spp & rtk --------------------------------------------------------------
*
* args   : none
* return :
* author : none
*-------------------------------------------------------------------------------------*/
extern void gnss_unc_out()
{
#if defined(PLAYBACK_MODE)
	double herr = 0, verr = 0;
	double pos_err[3] = { 0.0 };
	double pos[3] = { 0.0 };
	char strout[1024] = { 0 };
	int state = gpz_user_pvt->diff_status;
	//double secef[3] = { -2848699.9578886512,4649101.5436669877,3298342.2149575166 };
	uncertainty_t *unc = gnss_get_unc(state);
	//if (1)
	if (gpz_Meas->hpRefQflag[1] && unc != NULL)
	{
		if (unc->state == SOLQ_SINGLE)
		{
			if (gpz_kf_data->kf_Pvt_Info->kfFixStatus != FIX_STATUS_NEW) return;
			memcpy(pos, gpz_kf_data->kf_Pvt_Info->ecefPos, 3 * sizeof(double));
		}
		else if (unc->state == SOLQ_FIX || unc->state == SOLQ_FLOAT || unc->state == SOLQ_DGPS) memcpy(pos, rtkctrl.sol.rr, 3 * sizeof(double));
		else return;
		gnss_Pe_PosErr_Calc(pos, gpz_Meas->hpRefEcef, pos_err);
		herr = sqrt(pos_err[0] * pos_err[0] + pos_err[1] * pos_err[1]);
		verr = pos_err[2];
		if (state >= DIFF_SOL_STATUS_STANDALONE && state <= DIFF_SOL_STATUS_RTK_FIX)
		{
			/*mark prefix state as 0*/
			if (unc->state != SOLQ_FIX && unc->prefixf) state = 0;
			else state = unc->state;
			sprintf(strout, "uncfusion,%d,%d,%f,%d,%d,%d,%f,%f,%f,%f,%f,%f", state, unc->prefixf, gpz_user_pvt->posfix_t, unc->huncsmt.uncnum, unc->huncsmt.smting,
				unc->huncsmt.smtlen, unc->hunc, unc->huncsmt.unc_smt, unc->upunc, unc->upunc_smt, herr, verr);
			gnss_util_trace(3, "%s\n", strout);
		}
	}
#endif
}

/* preform ann progress --------------------------------------------------------------
*
* args   : none
* return :
* author : none
* note :to be update
*-------------------------------------------------------------------------------------*/
static void gnss_rtk_unc_progress(float *fat, const model_t* model, float *out)
{
	float* actz = NULL;
	int i = 0;
	uint8_t hidnode = model->hidnode;
	uint8_t inputdim = model->inputdim;
	uint8_t layer = model->hidlayer;
	const float* bias = model->bias;
	const float* coes = model->coes;

	if (!(actz = (float *)Sys_Calloc(sizeof(float), model->hidnode))) {
		gnss_util_trace(3, "act_z malloc err!!\n");
		return;
	}
	/*predict*/
	memcpy(out, bias, hidnode * sizeof(float));
	matmul_flt("TN", hidnode, 1, inputdim, 1.0, coes, fat, 1.0, out);

	memcpy(actz, out, hidnode * sizeof(float));
	if (model->act_h == 0) gnss_rtk_unc_act(actz, hidnode);
	if (layer > 1)
	{
		for (i = 0; i < layer - 1; i++)
		{
			memcpy(out, bias + hidnode + hidnode * i, hidnode * sizeof(float));
			matmul_flt("TN", hidnode, 1, hidnode, 1.0, coes + hidnode * inputdim + i * hidnode*hidnode, actz, 1.0, out);
			memcpy(actz, out, hidnode * sizeof(float));
			if (model->act_h == 0) gnss_rtk_unc_act(actz, hidnode);
		}
	}
	memcpy(out, bias + hidnode * layer, OUTDIM * sizeof(float));

	matmul_flt("TN", OUTDIM, 1, hidnode, 1.0, coes + hidnode * inputdim + (layer - 1) * hidnode * hidnode, actz, 1.0, out);
	if (model->act_o == 0) gnss_rtk_unc_act(out, OUTDIM);
	Sys_Free(actz);
}

static void gnss_unc_model_out(const model_t* model, const float *fat, float *out)
{
	uint8_t inputdim = model->inputdim;
	int i = 0;
	float* normalfat = NULL;
	//normalfat = zeros(inputdim, 1);
	if (!(normalfat = (float *)Sys_Calloc(sizeof(float), model->inputdim))) {
		gnss_util_trace(3, "normal fat malloc err!!\n");
		return;
	}
	memcpy(normalfat, fat, inputdim * sizeof(float));
	/*normlise*/
	gnss_rtk_unc_normalise(normalfat, model->maxfat, model->minfat, inputdim);

	/*progress*/
	gnss_rtk_unc_progress(normalfat, model, out);
	/*inverse nomlise*/
	gnss_rtk_unc_invnorm(out, model->maxerr, model->minerr, OUTDIM);
	//gnss_rtk_cfd_prefix_unc(rtk, state);
	Sys_Free(normalfat);
}
static double gnss_unc_hunc2vunc(double hunc)
{
	double hvratio = 1.0;
	if (gpz_user_pvt->DOP.hDOP > 0 && gpz_user_pvt->DOP.vDOP > 0)
	{
		hvratio = gpz_user_pvt->DOP.vDOP / gpz_user_pvt->DOP.hDOP;
	}
	if (hvratio < 1.0) hvratio = 1.2;
	return hunc * hvratio;
}

static void gnss_unc_predict_op(uncertainty_t *unc, float* fat, int state, int prefixf)
{
	float *out = NULL;
	const model_t* modelh = NULL;
	const model_t* modelv = NULL;
	//uint8_t inputdim;
	gnss_rtk_unc_get_model(state, prefixf, &modelh, &modelv);
	//if (modelh == NULL)
	//{
	//	gnss_util_trace(3, "no valid h model\n");
	//	return;
	//}
	//inputdim = modelh->inputdim;
	//out = zeros(modelh->hidnode, 1);

	if (!(out = (float *)Sys_Calloc(sizeof(float), modelh->hidnode))) {
		gnss_util_trace(3, "fat malloc err!!\n");
		return;
	}
	gnss_unc_model_out(modelh, (const float*)fat, out);
	//unc->hunc = gnss_rtk_cfd_check(out[0], state, 0);
	unc->hunc = gnss_unc_ab_smt(&(unc->huncsmt), out[0], rtkctrl.ptor, state, prefixf, 0, (char *)modelh->name);
	//unc->hunc = out[0];
	if (modelv != NULL)
	{
		gnss_unc_model_out(modelv, (const float*)fat, out);
		//*upunc_test = gnss_rtk_cfd_check(out[0], state, 1);
		unc->upunc = gnss_unc_ab_smt(&(unc->vuncsmt), out[0], rtkctrl.ptor, state, prefixf, 1, (char *)modelv->name);
		//gnss_rtk_cfd_prefix_unc(&rtkctrl, state, upunc_test);
		//unc->upunc = out[0];
	}
	else
	{
		//to do: get v unc from h model
		unc->upunc = gnss_unc_hunc2vunc(unc->hunc);
	}
	Sys_Free(out);
}

static void gnss_rtk_unc_fill_cfd(rtk_t *rtk)
{
	if (rtk->unc.vflag == 1)
	{
		rtk->cfd.horicfd[0] = rtk->unc.hunc_smt;
		rtk->cfd.upcfd[0] = rtk->unc.upunc_smt;
		rtk->cfd.horicfd[1] = 2 * rtk->unc.hunc_smt;
		rtk->cfd.upcfd[1] = 2 * rtk->unc.upunc_smt;
		rtk->cfd.horicfd[2] = 3 * rtk->unc.hunc_smt;
		rtk->cfd.upcfd[2] = 3 * rtk->unc.upunc_smt;
		rtk->cfd.cfdflag = 1;
	}
	else
	{
		rtk->cfd.cfdflag = 0;
	}
}


uint8_t fusion_mode_to_accu_indicator(GnssFusionType ftype)
{
    uint8_t ind = 0;

    switch (ftype)
    {
    case FUSION_TYPE_INVALID:
        ind = 0;
        break;

    case FUSION_TYPE_CHIP:
    case FUSION_TYPE_GNSSONLY:
        ind = 1;
        break;

    case FUSION_TYPE_DGNSS:
        ind = 2;
        break;

    case FUSION_TYPE_RTK_FIX:
        ind = 4;
        break;

    case FUSION_TYPE_RTK_PROPAGATE: /* Xukun  */
    case FUSION_TYPE_RTK_FLOAT:
        ind = 5;
        break;

    case FUSION_TYPE_DR:
        ind = 60;
        break;

    case FUSION_TYPE_CHIP_FUSION:
    case FUSION_TYPE_GO_FUSION:
        ind = 61;
        break;

    case FUSION_TYPE_DGNSS_FUSION:
        ind = 62;
        break;

    case FUSION_TYPE_RTK_FIX_FUSION:
        ind = 64;
        break;
    
    case FUSION_TYPE_RTK_FLOAT_FUSION:
        ind = 65;
        break;

    default:
        SYS_LOGGING(OBJ_SD, LOG_ERROR, "Unexpected fusion type in ACCUR!");
        ind = 0;
        break;
    }

    return ind;
}

static void gnss_pe_unc_fill_accu(uncertainty_t* pvtunc, USER_PVT* pvt)
{
	double	sq2 = sqrt(2);
	if (pvtunc->vflag)
	{
		pvt->accu.accu1_east = (float)(pvtunc->hunc_smt / sq2);
		pvt->accu.accu1_north = (float)(pvtunc->hunc_smt / sq2);
		pvt->accu.accu1_up = (float)(pvtunc->upunc_smt);

		pvt->accu.accu2_east = (float)(2 * pvtunc->hunc_smt / sq2);
		pvt->accu.accu2_north = (float)(2 * pvtunc->hunc_smt / sq2);
		pvt->accu.accu2_up = (float)(2 * pvtunc->upunc_smt);

		pvt->accu.accu3_east = (float)(3 * pvtunc->hunc_smt / sq2);
		pvt->accu.accu3_north = (float)(3 * pvtunc->hunc_smt / sq2);
		pvt->accu.accu3_up = (float)(3 * pvtunc->upunc_smt);

		pvt->accu.accu_type = fusion_mode_to_accu_indicator(pvt->pos_fusion_mode);
		pvt->accu.valid = TRUE;
	}
	else
	{
		pvt->accu.valid = FALSE;
	}
}

/*rtk unc predict --------------------------------------------------------------------
*
* args   : none
* return :
* author : none
*-------------------------------------------------------------------------------------*/
extern void gnss_rtk_unc_predict(rtk_t *rtk, int state)
{
	float *fat=NULL;
	double sec = rtk->sol.time.time + rtk->sol.time.sec;
#ifdef PLAYBACK_MODE
	char strout[1024] = { 0 };
	char *pstr = strout;
	uint8_t inputdim;
#endif
	const model_t* modelh = NULL;
	const model_t* modelv = NULL;
	int i = 0;

	if (state == SOLQ_FIX || state == SOLQ_FLOAT || state == SOLQ_DGPS) rtk->unc.prediff.preuncconf = gnss_pe_unc_prediff_test(&(rtk->unc), state);

	gnss_rtk_unc_get_model(state, rtk->prefixf, &modelh, &modelv);
	//if (modelh == NULL)
	//{
	//	gnss_util_trace(3, "no valid h model\n");
	//	return;
	//}
	//fat = zeros(modelh->inputdim, 1);
	if (!(fat = (float *)Sys_Calloc(sizeof(float), modelh->inputdim))) {
		gnss_util_trace(3, "fat malloc err!!\n");
		return;
	}
	gnss_rtk_unc_getfat(rtk, state, fat);

	gnss_unc_predict_op(&(rtk->unc), fat, state, rtk->prefixf);
#ifdef PLAYBACK_MODE
	inputdim = modelh->inputdim;
	if ((state != SOLQ_FIX && rtk->prefixf))
		pstr += sprintf(pstr, "rtkfactodp,%f,%d,", sec, state);
	else if (state == SOLQ_FIX)
		pstr += sprintf(pstr, "rtkfactodx,%f,%d,", sec, state);
	else if (state == SOLQ_FLOAT || state == SOLQ_DGPS)
		pstr += sprintf(pstr, "rtkfactodt,%f,%d,", sec, state);
	for (i = 0; i < inputdim; i++)
	{
		pstr += sprintf(pstr, "%f,", fat[i]);
	}
	pstr += sprintf(pstr, "%f", rtk->unc.hunc);
	gnss_util_trace(3, "%s\n", strout);
	GLOGD("%s", strout);
#endif

	unc_smt_op(&(rtk->unc.huncsmt), rtk->unc.hunc, state, rtk->prefixf);

	unc_smt_op(&(rtk->unc.vuncsmt), rtk->unc.upunc, state, rtk->prefixf);

	rtk->unc.hunc_smt = rtk->unc.huncsmt.unc_smt;
	rtk->unc.upunc_smt = rtk->unc.vuncsmt.unc_smt;
	//rtk->unc.hunc_smt = rtk->unc.hunc;
	//rtk->unc.upunc_smt = rtk->unc.upunc;
	rtk->unc.vflag = 1;
	rtk->unc.state = state;
	rtk->unc.prefixf = rtk->prefixf;
	gnss_rtk_unc_fill_cfd(rtk);
	gnss_util_trace(3, "unctest,%f,%d,%d,%f,%f\n", sec, state, rtk->prefixf, rtk->unc.hunc, rtk->unc.huncsmt.unc_smt);
	//GLOGI("unctest,%f,%d,%d,%f,%f", sec, state, rtk->prefixf, rtk->unc.hunc, rtk->unc.huncsmt.unc_smt);
	Sys_Free(fat);
}

/*cfd predict debug-----------------------------------------------------------------
*
* args   : none
* return :
* author : none
* note :to be update
*-------------------------------------------------------------------------------------*/
extern void gnss_rtk_unc_realtime_test(rtk_t *rtk, int state, double herr, double uerr)
{
#if 0
	float *fat = NULL;
	float *out = NULL;
	char strout[1024] = { 0 };
	char *pstr = strout;
	const model_t* modelh, *modelv;
	uint8_t inputdim;
	int i = 0;
	gnss_rtk_unc_get_model(state, rtk->prefixf, &modelh, &modelv);
	if (modelh == NULL)
	{
		gnss_util_trace(3, "no valid h model\n");
		return;
	}
	inputdim = modelh->inputdim;
	if (!(fat = (float *)Sys_Calloc(sizeof(float), modelh->inputdim))) {
		gnss_util_trace(3, "fat malloc err!!\n");
		return;
	}
	if (!(out = (float *)Sys_Calloc(sizeof(float), modelh->hidnode))) {
		gnss_util_trace(3, "out malloc err!!\n");
		return;
	}
	gnss_rtk_unc_getfat(rtk, state, fat);
	pstr += sprintf(pstr, "rtkcfdtest,%f,%d,", rtk->sol.time.sec + rtk->sol.time.time, state);
	for (i = 0; i < inputdim; i++)
	{
		pstr += sprintf(pstr, "%f,", fat[i]);
	}
	//gnss_rtk_cfd_set_acc(fat, FIXINPUTDIM);
	/*normlise*/
	gnss_rtk_unc_normalise(fat, modelh->maxfat, modelh->minfat, inputdim);

	/*progress*/
	gnss_rtk_unc_progress(fat, modelh, out);
	//gnss_rtk_cfd_act(out, OUTDIM);
	/*inverse nomlise*/
	gnss_rtk_unc_invnorm(out, modelh->maxerr, modelh->minerr, OUTDIM);
	rtk->unc.hunc = gnss_rtk_unc_check(out[0], state, 0, 0);
	//pstr += sprintf(pstr, "%f,%f,%f", herr, uerr, gnss_rtk_cfd_check(out[0], state));
	pstr += sprintf(pstr, "%f,%f,%f", herr, uerr, out[0]);
	gnss_util_trace(3, "%s\n", strout);
	Sys_Free(out);
	Sys_Free(fat);
#endif
}
/*
static int get_fat_test_torefine(double *fat, char *line, int start, int len)
{
	char *split = strtok(line, ",");
	int j = 0;
	int state = -1;
	for (j = 0; j < len + start; ++j) {
		if (j == 2) state = atoi(split);
		if (j >= start) fat[j - start] = atof(split);
		split = strtok(0, ",");
		//printf("%s,", split);
	}
	return state;
}
*/

static int get_fat_test(float *fat, char *line, int start, int prefixf, int len)
{
	char *split = strtok(line, ",");
	int j = 0;
	int state = -1;
	int fati = 0;
	double value = 0;
	for (j = 0; fati < len; ++j) {
		if (j == 2) state = atoi(split);
		if (prefixf)
		{
			if (j >= start && !(j==4 || j == 5 || j == 9 || j == 10 || j == 20 || j == 21)) 
				fat[fati++] = (float)atof(split);
		}
		else
			if (j >= start) fat[fati++] = (float)atof(split);
		split = strtok(0, ",");
		//printf("%s,", split);
	}
	return state;
}

/* perform cfd predict debug------------------------------------------------------------
*
* args   : none
* return :
* author : none
* note :to be update
*-------------------------------------------------------------------------------------*/
extern void gnss_rtk_unc_predict_test()
{
#if 0
	float *fat = NULL;
	float *out = NULL;
	char strout[1024] = { 0 };
	char *pstr = strout;
	model_t* modelh, *modelv;
	uint8_t inputdim;
	char line[1024] = { 0 };
	char tmpc[1024] = { 0 };
	int state;
	//int i = 0;
	FILE* fatfile = fopen("E:\\anadata\\ST\\trainset\\rtl5\\sppfat.txt", "r");
	FILE* predf = fopen("E:\\anadata\\ST\\trainset\\rtl5\\rtkpredc3.txt", "w");

	if (fatfile == NULL)
	{
		printf("file open err\n");
		fclose(fatfile);
		fclose(predf);
		return;
	}

	while (fgets(line, 1024, fatfile) != NULL)
	{
		memcpy(tmpc, line, 1024 * sizeof(char));

		gnss_rtk_unc_get_model(SOLQ_FLOAT, 0, &modelh, &modelv);

		if (modelh == NULL)
		{
			gnss_util_trace(3, "no valid h model\n");
			return;
		}

		inputdim = modelh->inputdim;
		if (!(fat = (float *)Sys_Calloc(sizeof(float), modelh->inputdim))) {
			gnss_util_trace(3, "fat malloc err!!\n");
			return;
		}
		if (!(out = (float *)Sys_Calloc(sizeof(float), modelh->hidnode))) {
			gnss_util_trace(3, "out malloc err!!\n");
			return;
		}
		//fat = zeros(modelh->inputdim, 1);
		//out = zeros(modelh->hidnode, 1);

		//gnss_rtk_cfd_set_acc(fat, FIXINPUTDIM);
		state = get_fat_test(fat, tmpc, 4, inputdim, 1);
		//normlise
		gnss_rtk_unc_normalise(fat, modelh->maxfat, modelh->minfat, inputdim);
		gnss_rtk_unc_progress(fat, modelh, out);
		/*inverse nomlise*/
		gnss_rtk_unc_invnorm(out, modelh->maxerr, modelh->minerr, OUTDIM);
		if (strlen(line) != 0) line[strlen(line) - 1] = '\0';
		out[0] = gnss_rtk_unc_check(out[0], state, 0, 0);
		fprintf(predf, "%s,%.3f\n", line, out[0]);
		Sys_Free(out);
		Sys_Free(fat);
	}
	fclose(fatfile);
	fclose(predf);
	//rtk->cfd.horicfd[2] = out[0];
#endif
}

/* perform cfd predict debug-------------------------------------------------------------
*
* args   : none
* return :
* author : none
* note :to be update
*-------------------------------------------------------------------------------------*/
extern void gnss_rtk_unc_batch_test()
{
#if 0
	float *fat=NULL;
	char strout[1024] = { 0 };
	char *pstr = strout;
	model_t* modelh, *modelv;
	uint8_t inputdim;
	char line[1024] = { 0 };
	char tmpc[1024] = { 0 };
	int state;
	//int i = 0;
	//FILE* fatfile = fopen("E:\\anadata\\ST\\trainset\\sppt\\sppfat.txt", "r");
	//FILE* predf = fopen("E:\\anadata\\ST\\trainset\\sppt\\spppredc3.txt", "w");
	FILE* fatfile = fopen("E:\\anadata\\ST1+5\\flt16k_fltver\\rtkfal.txt", "r");
	FILE* predf = fopen("E:\\anadata\\ST1+5\\flt16k_fltver\\rtkfalpredflt.txt", "w");
	uncertainty_t unct = { 0 };
	int prefixf = 0;

	if (fatfile == NULL)
	{
		printf("file open err\n");
		fclose(fatfile);
		fclose(predf);
		return;
	}

	while (fgets(line, 1024, fatfile) != NULL)
	{
		memcpy(tmpc, line, 1024 * sizeof(char));

		gnss_rtk_unc_get_model(SOLQ_FLOAT, prefixf, &modelh, &modelv);
		if (modelh == NULL)
		{
			gnss_util_trace(3, "no valid h model\n");
			return;
		}
		inputdim = modelh->inputdim;
		if (!(fat = (float *)Sys_Calloc(sizeof(float), modelh->inputdim))) {
			gnss_util_trace(3, "batchfat malloc err!!\n");
			return;
		}
		//fat = zeros(modelh->inputdim, 1);
		//gnss_rtk_cfd_set_acc(fat, FIXINPUTDIM);
		//state = get_fat_test(fat, tmpc, 2, inputdim);
		state = get_fat_test(fat, tmpc, 4, prefixf, inputdim);

		gnss_unc_predict_op(&unct, fat, SOLQ_FLOAT, prefixf);
		if (strlen(line) != 0) line[strlen(line) - 1] = '\0';
		fprintf(predf, "%s,%.3f,%.3f\n", line, unct.hunc,unct.upunc);
	}
	fclose(fatfile);
	fclose(predf);
	Sys_Free(fat);
#endif
}

static void gnss_pe_unc_abfat_ceil(double **fat, uint8_t fatsize)
{
	// cep997
	//kf_posres	 kf_posresstd	 kf_velres	 kf_velresstd	 kf_gdop  ls_posres	 kflsdis
	double fatceil[7] = { 46.2, 41.6, 5.5, 4.3, 37.1, 34.7, 81.5 };
	uint8_t i = 0;
	for (i = 0; i < fatsize; i++)
	{
		if (*fat[i] <= 0 || *fat[i] > fatceil[i])
		{
			*fat[i] = fatceil[i];
		}
	}
}

/*get spp unc factor as input ----------------------------------------------------------
*
* args   : none
* return :
* author : none
*-------------------------------------------------------------------------------------*/
extern int gnss_pe_spp_get_fat(float *sppfat, double *herr, double *verr, int *hpv)
{
	double pos_err[3] = { 0.0 };
	uint8_t nstc = sumofbit1(peMode.staticData.historyStatic, 8);
	uint8_t i = 0, cno35cnt = 0;
	double ls_gdop = sqrt((double)gpz_kf_data->lsBlk->DoP.pDOP * gpz_kf_data->lsBlk->DoP.pDOP + (double)gpz_kf_data->lsBlk->DoP.tDOP * gpz_kf_data->lsBlk->DoP.tDOP);
	double kf_gdop = sqrt((double)gpz_user_pvt->DOP.pDOP * gpz_user_pvt->DOP.pDOP + (double)gpz_user_pvt->DOP.tDOP * gpz_user_pvt->DOP.tDOP);
	double ls_posres = gpz_kf_data->lsBlk->pos_res;
	double ls_velres = gpz_kf_data->lsBlk->vel_res;
	uint32_t lscnt = gpz_kf_data->lsBlk->lsCtrl.lsCnt > 100 ? 100 : gpz_kf_data->lsBlk->lsCtrl.lsCnt;
	double kf_posres = gpz_kf_data->posRes;
	double kf_posresstd = gpz_kf_data->posResStd;
	double kf_velres = gpz_kf_data->velRes;
	double kf_velresstd = gpz_kf_data->velResStd;
	double prdiffstd1 = gpz_Meas->prDiffStd_1;
	double prdrdiffstdave = gpz_Meas->prdrDiffStd_avg;
	uint32_t kfcnt = gpz_kf_data->kfCnt > 100 ? 100 : gpz_kf_data->kfCnt;
	uint8_t	svmodeinuse = sumofbit1(gpz_kf_data->kf_ctrl.svModeInUse, 4);
	uint8_t	prValidNum = gpz_kf_data->kf_ctrl.prNum - gpz_kf_data->kf_ctrl.prRejNum;
	uint8_t	prRejNum = gpz_Meas->measCnt - prValidNum;
	uint8_t	drVlaidNum = gpz_kf_data->kf_ctrl.drNum - gpz_kf_data->kf_ctrl.drRejNum;
	double kflsdis = 0;
	uint8_t	kflsv = 0;
	double *fltfats[7] = { &kf_posres, &kf_posresstd, &kf_velres, &kf_velresstd, &kf_gdop, &ls_posres, &kflsdis };

	if (gpz_user_pvt->diff_status != DIFF_SOL_STATUS_STANDALONE) return 0;

	if (gpz_kf_data->ls_Pvt_Info->fix_status == FIX_STATUS_NEW && gpz_kf_data->ls_Pvt_Info->fix_dim == DIM_3D && gpz_kf_data->kf_Pvt_Info->kfFixStatus == FIX_STATUS_NEW)
	{
		kflsdis = gnssCalPosDis(gpz_kf_data->ls_Pvt_Info->LLApos, gpz_kf_data->kf_Pvt_Info->kfLLApos, 0);
		kflsv = 1;
		//gnss_util_trace(3, "kflsdis,%d,%f,%d,%d,%d,%f\n", 1, gpz_user_pvt->posfix_t, gpz_kf_data->ls_Pvt_Info->fix_status, gpz_kf_data->ls_Pvt_Info->fix_dim, gpz_kf_data->kf_Pvt_Info->kfFixStatus, kflsdis);
	}
	else
	{
		kflsdis = -1;
		//gnss_util_trace(3, "kflsdis,%d,%f,%d,%d,%d,%f\n", 0, gpz_user_pvt->posfix_t, gpz_kf_data->ls_Pvt_Info->fix_status, gpz_kf_data->ls_Pvt_Info->fix_dim, gpz_kf_data->kf_Pvt_Info->kfFixStatus, kflsdis);
		kflsv = 0;
	}
	gnss_pe_unc_abfat_ceil(fltfats, 7);
	for (i = 0; i < GNSS_MAX_MODE; i++)
	{
		cno35cnt += gpz_Meas->Cno35Cnt[i];
	}
	if (sppfat != NULL)
	{
		sppfat[0] = (float)kf_posres;
		sppfat[1] = (float)kf_posresstd;
		sppfat[2] = (float)kf_velres;
		sppfat[3] = (float)kf_velresstd;
		sppfat[4] = (float)kf_gdop;
		sppfat[5] = (float)ls_posres;
		sppfat[6] = (float)kflsdis;
		sppfat[7] = (float)prValidNum;
		sppfat[8] = (float)drVlaidNum;
		sppfat[9] = (float)gpz_kf_data->kf_ctrl.prDewNum;
		sppfat[10] = (float)gpz_kf_data->kf_ctrl.freeNum;
		sppfat[11] = (float)gpz_user_pvt->avgCNO;
		sppfat[12] = (float)gpz_Meas->measCnt;
		sppfat[13] = (float)peMode.userSceData.isOpenSky;
		sppfat[14] = (float)peMode.userSceData.isUnderEleRoad;
		sppfat[15] = (float)gpz_Meas->prDiff10Cnt;
		sppfat[16] = (float)gpz_Meas->prDiff20Cnt;
		sppfat[17] = (float)cno35cnt;
		sppfat[18] = (float)gpz_kf_data->lsBlk->lsCtrl.prNum;
		sppfat[19] = (float)kflsv;
	}
#if defined(PLAYBACK_MODE)
	if (gpz_Meas->hpRefQflag[1])
	//if (1)
	{
		//double secef[3] = { -2848699.9578886512,4649101.5436669877,3298342.2149575166 };
		if (gpz_kf_data->kf_Pvt_Info->kfFixStatus != FIX_STATUS_NEW) return 0;
		gnss_Pe_PosErr_Calc(gpz_kf_data->kf_Pvt_Info->ecefPos, gpz_Meas->hpRefEcef, pos_err);
		//gnss_Pe_PosErr_Calc(gpz_user_pvt->ecef.pos, secef, pos_err);
		*herr = sqrt(pos_err[0] * pos_err[0] + pos_err[1] * pos_err[1]);
		*verr = pos_err[2];
		if (gpz_user_pvt->diff_status == DIFF_SOL_STATUS_STANDALONE)
		{
			//kf_posres	 kf_posresstd	 kf_velres	 kf_velresstd	 kf_gdop  ls_posres	 kflsdis
			gnss_util_trace(3, "sppfat,%f,%f,%f,%f,%f,%f,%f,%f,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%d,%f,%f\n",
				gpz_user_pvt->posfix_t, kf_posres, kf_posresstd, kf_velres, kf_velresstd, kf_gdop, ls_posres, kflsdis,
				prValidNum, drVlaidNum, gpz_kf_data->kf_ctrl.prDewNum, gpz_kf_data->kf_ctrl.freeNum, gpz_user_pvt->avgCNO,
				gpz_Meas->measCnt, peMode.userSceData.isOpenSky, peMode.userSceData.isUnderEleRoad,
				gpz_Meas->prDiff10Cnt, gpz_Meas->prDiff20Cnt, cno35cnt, gpz_kf_data->lsBlk->lsCtrl.prNum, kflsv, *herr, *verr);
			//return 1;
		}
		*hpv = 1;
	}
	else
	{
		*herr = 0.0;
		*verr = 0.0;
		*hpv = 0;
	}
#endif
	return 1;
}

extern uncertainty_t* gnss_get_unc(int difstate)
{
	if (difstate == DIFF_SOL_STATUS_STANDALONE) {
		return &g_pvtunc;
	}
	else if (difstate > DIFF_SOL_STATUS_STANDALONE && difstate < DIFF_SOL_STATUS_RTK_PROPAGATE) {
		return &rtkctrl.unc;
	}

	return NULL;
}

extern void gnss_pe_unc_predict(uncertainty_t* pvtunc)
{
	float *sppfat = NULL;
	double sec = gpz_user_pvt->posfix_t;
#if defined(PLAYBACK_MODE)
	char strout[1024] = { 0 };
	char *pstr = strout;
	uint8_t inputdim;
#endif
	const model_t* modelh = NULL;
	const model_t* modelv = NULL;
	int i = 0;
	int state = SOLQ_SINGLE;
	double herr, uperr;
	int hpv = 0;
	pvtunc->prediff.preuncconf=gnss_pe_unc_prediff_test(pvtunc, SOLQ_SINGLE);

	gnss_rtk_unc_get_model(state, 0, &modelh, &modelv);
	//if (modelh == NULL)
	//{
	//	gnss_util_trace(3, "no valid h model\n");
	//	return;
	//}
	//sppfat = zeros(modelh->inputdim, 1);
	if (!(sppfat = (float *)Sys_Calloc(sizeof(float), modelh->inputdim))) {
		gnss_util_trace(3, "sppfat malloc err!!\n");
		return;
	}
	if (!gnss_pe_spp_get_fat(sppfat, &herr, &uperr, &hpv))
	{ 
		Sys_Free(sppfat);
		return ;
	}

	gnss_unc_predict_op(pvtunc, sppfat, state, 0);

#if defined(PLAYBACK_MODE)
	inputdim = modelh->inputdim;
	pstr += sprintf(pstr, "sppfactodp,%f,%d,", sec, state);
	for (i = 0; i < inputdim; i++)
	{
		pstr += sprintf(pstr, "%f,", sppfat[i]);
	}
	pstr += sprintf(pstr, "%f,%f", pvtunc->hunc, pvtunc->upunc);
	gnss_util_trace(3, "%s\n", strout);
	GLOGD("%s", strout);
#endif

	unc_smt_op(&(pvtunc->huncsmt), pvtunc->hunc, state, 0);
	unc_smt_op(&(pvtunc->vuncsmt), pvtunc->upunc, state, 0);
	pvtunc->vflag = 1;
	pvtunc->state = SOLQ_SINGLE;
	pvtunc->prefixf = 0;
	pvtunc->hunc_smt = pvtunc->huncsmt.unc_smt;
	pvtunc->upunc_smt = pvtunc->vuncsmt.unc_smt;
	//pvtunc->hunc_smt = pvtunc->hunc;
	//pvtunc->upunc_smt = pvtunc->upunc;

	gnss_pe_unc_fill_accu(pvtunc, gpz_user_pvt);

#if defined(PLAYBACK_MODE)
	if(hpv) gnss_spp_unc_smtout(pvtunc, herr, uperr, state);
#endif

	gnss_util_trace(3, "sppunctest,%f,%d,%f,%f\n", sec, state, pvtunc->hunc, pvtunc->upunc);
	//GLOGI("sppunctest,%f,%d,%f,%f", sec, state, pvtunc->hunc, pvtunc->upunc);
	Sys_Free(sppfat);
}

extern int gnss_unc_opensky_check()
{
	unc_scene_t *scene_tag = NULL;
	scene_tag = ag_pe_get_scene_tag_unc();
	//if (!scene_tag) return 0;
	if (scene_tag->avg_cn0 > 40 && scene_tag->pdop < 2 && (scene_tag->gps_num >= 6 && (
		scene_tag->gal_num >= 4 || scene_tag->gln_num>=4 || scene_tag->bds_num >= 4)))
	{
		return 1;
	}
	return 0;
}